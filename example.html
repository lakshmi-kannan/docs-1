

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1   Configuration Examples &mdash; FlexSwitch 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="FlexSwitch 1.0 documentation" href="index.html"/>
        <link rel="next" title="FlexSwitch Package Installation" href="softwareflexswitch.html"/>
        <link rel="prev" title="&lt;no title&gt;" href="python_config.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> FlexSwitch
          

          
          </a>

          
            
            
              <div class="version">
                1.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html"> Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html"> Developer Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="nwengineer.html"> Network Engineer Home</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"> Example Configurations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuring-arp">1.1&nbsp;&nbsp;&nbsp;Configuring ARP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#timeout-values">1.1.1&nbsp;&nbsp;&nbsp;Timeout Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-with-rest-api">1.1.1.1&nbsp;&nbsp;&nbsp;Configuring  with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-with-python-sdk">1.1.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-via-configuration-file">1.1.1.3&nbsp;&nbsp;&nbsp;Configuring via Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-static-entries">1.1.2&nbsp;&nbsp;&nbsp;Configuring Static Entries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">1.1.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.1.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">1.1.2.3&nbsp;&nbsp;&nbsp;Configuring via Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#display-arp-entry">1.1.3&nbsp;&nbsp;&nbsp;Display ARP Entry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#display-all-arp-entries">1.1.3.1&nbsp;&nbsp;&nbsp;Display All ARP Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-a-specific-arp-entry">1.1.3.2&nbsp;&nbsp;&nbsp;Display a specific ARP entry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#python-sdk-arp-methods">1.1.4&nbsp;&nbsp;&nbsp;Python SDK ARP Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#state-methods">1.1.4.1&nbsp;&nbsp;&nbsp;State Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#config-methods">1.1.4.2&nbsp;&nbsp;&nbsp;Config Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-bfd">1.2&nbsp;&nbsp;&nbsp;Configuring BFD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bfd-support">1.2.1&nbsp;&nbsp;&nbsp;BFD Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bfd-operation">1.2.2&nbsp;&nbsp;&nbsp;BFD Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#session-establishment">1.2.2.1&nbsp;&nbsp;&nbsp;Session Establishment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#demand-mode">1.2.2.2&nbsp;&nbsp;&nbsp;Demand Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#protocol-specific-failure-detection">1.2.2.3&nbsp;&nbsp;&nbsp;Protocol Specific Failure Detection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-bfd">1.2.3&nbsp;&nbsp;&nbsp;Enabling BFD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">1.2.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">1.2.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-bgp">1.3&nbsp;&nbsp;&nbsp;Configuring BGP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bgp-operation">1.3.1&nbsp;&nbsp;&nbsp;BGP Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">1.3.1.1&nbsp;&nbsp;&nbsp;Session Establishment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-globally">1.3.2&nbsp;&nbsp;&nbsp;Enabling Globally</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bgp-global-rest">1.3.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bgp-global-python">1.3.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#neighbor-setup">1.3.3&nbsp;&nbsp;&nbsp;Neighbor Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bgp-neighbor-rest">1.3.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bgp-neighbor-python">1.3.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#peer-groups">1.3.4&nbsp;&nbsp;&nbsp;Peer Groups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utilizing-peer-groups">1.3.4.1&nbsp;&nbsp;&nbsp;Utilizing Peer Groups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id21">1.3.5&nbsp;&nbsp;&nbsp;Enabling BFD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">1.3.5.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">1.3.5.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-multipath">1.3.6&nbsp;&nbsp;&nbsp;Enabling MultiPath</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id24">1.3.6.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">1.3.6.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#redistribution">1.3.7&nbsp;&nbsp;&nbsp;Redistribution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-dhcp-relay">1.4&nbsp;&nbsp;&nbsp;Configuring DHCP Relay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dhcp-relay-operation">1.4.1&nbsp;&nbsp;&nbsp;DHCP Relay Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-dhcp-relay">1.4.2&nbsp;&nbsp;&nbsp;Enabling DHCP relay</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id26">1.4.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">1.4.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-lldp">1.5&nbsp;&nbsp;&nbsp;Configuring LLDP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id30">1.5.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">1.5.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-loopbacks">1.6&nbsp;&nbsp;&nbsp;Configuring LoopBacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">1.6.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">1.6.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-logging">1.7&nbsp;&nbsp;&nbsp;Configuring Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system">1.7.1&nbsp;&nbsp;&nbsp;System</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id34">1.7.1.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">1.7.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#daemon">1.7.2&nbsp;&nbsp;&nbsp;Daemon</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id36">1.7.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">1.7.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-ospf">1.8&nbsp;&nbsp;&nbsp;Configuring OSPF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ospfareaentry">1.8.1&nbsp;&nbsp;&nbsp;OspfAreaEntry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ospfifentry">1.8.2&nbsp;&nbsp;&nbsp;OspfIfEntry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ospfglobal">1.8.3&nbsp;&nbsp;&nbsp;OspfGlobal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-commands">1.8.4&nbsp;&nbsp;&nbsp;Show commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-routing-policies">1.9&nbsp;&nbsp;&nbsp;Configuring Routing Policies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-policy-condition-with-rest-api">1.9.1&nbsp;&nbsp;&nbsp;Configuring Policy Condition with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-policy-statement-with-rest-api">1.9.2&nbsp;&nbsp;&nbsp;Configuring Policy Statement with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-policy-definition-with-rest-api">1.9.3&nbsp;&nbsp;&nbsp;Configuring Policy Definition with Rest API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-routing">1.10&nbsp;&nbsp;&nbsp;Configuring Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#static-routes">1.10.1&nbsp;&nbsp;&nbsp;Static Routes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id38">1.10.1.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">1.10.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-vlans">1.11&nbsp;&nbsp;&nbsp;Configuring VLANS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id40">1.11.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">1.11.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-vrrp">1.12&nbsp;&nbsp;&nbsp;Configuring VRRP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id42">1.12.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">1.12.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="softwareflexswitch.html"> Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ONIE_install.html"> ONIE Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="apis.html">API reference!</a></li>
<li class="toctree-l1"><a class="reference internal" href="apis.html#indices-and-tables">Indices and tables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">FlexSwitch</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>1&nbsp;&nbsp;&nbsp;Configuration Examples</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/example.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration-examples">
<h1>1&nbsp;&nbsp;&nbsp;Configuration Examples<a class="headerlink" href="#configuration-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuring-arp">
<h2>1.1&nbsp;&nbsp;&nbsp;Configuring ARP<a class="headerlink" href="#configuring-arp" title="Permalink to this headline">¶</a></h2>
<p>The ARP protocol is utilized to be learn the layer 2 MAC address of a directly attached device and associate it with an IP address in which to communicate.  ARPd is the daemon on FlexSwitch that manages, learns, and programs layer 2 adjancency information into the data-plane.</p>
<div class="section" id="timeout-values">
<h3>1.1.1&nbsp;&nbsp;&nbsp;Timeout Values<a class="headerlink" href="#timeout-values" title="Permalink to this headline">¶</a></h3>
<p>FlexSwitch supports the ability to change the ARP timers Globally.  The default timeout value is 10 minutes(600 seconds).  ARP daemon will attempt refresh of the ARP entry at the following intervals, with example times based on default timer and number of attempts:</p>
<blockquote>
<div><ul class="simple">
<li>50% of ARP timeout (300 seconds, 1 ARP request frame sent)</li>
<li>25% of ARP timeout (150 seconds, 1 ARP request frame sent)</li>
</ul>
</div></blockquote>
<p>With more aggressve attempts in the last minute for timeout:</p>
<blockquote>
<div><ul class="simple">
<li>60 seconds of ARP Timeout (1 ARP request frame sent)</li>
<li>30 seconds remaining in ARP Timeout (1 ARP request frame sent)</li>
<li>10 seconds remaining in ARP timeout (10 ARP request frames sent)</li>
</ul>
</div></blockquote>
<div class="section" id="configuring-with-rest-api">
<h4>1.1.1.1&nbsp;&nbsp;&nbsp;Configuring  with Rest API<a class="headerlink" href="#configuring-with-rest-api" title="Permalink to this headline">¶</a></h4>
<p>FlexSwitch has a REST based API, and below is an example utilzing Linux cURL:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Vrf&quot;:&quot;VRF Name&quot;, &quot;Timeout&quot;:&lt;*Timeout Value in seconds*&gt;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/ArpGlobal&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="49%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Vrf</td>
<td>string</td>
<td>VRF name where configuration is applied.</td>
<td>No</td>
<td>&#8220;default&#8221;</td>
</tr>
<tr class="row-odd"><td>Timeout</td>
<td>integer</td>
<td>Length of ARP timeout in seconds.</td>
<td>Yes</td>
<td>600s</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@5b5a8d783113</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;{&quot;Vrf&quot;:&quot;default&quot;, &quot;Timeout&quot;:1000}&#39; http://localhost:8080/public/v1/config/ArpGlobal</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;a97b920d-8b10-47b1-7ea9-890b07f6e712&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>


<span class="n">root</span><span class="nd">@5b5a8d783113</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X GET --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; http://localhost:8080/public/v1/config/ArpGlobals | python -m json.tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">174</span>  <span class="mi">100</span>   <span class="mi">174</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">87087</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">169</span><span class="n">k</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Vrf&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Timeout&quot;</span><span class="p">:</span> <span class="mi">1000</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;a97b920d-8b10-47b1-7ea9-890b07f6e712&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-with-python-sdk">
<h4>1.1.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#configuring-with-python-sdk" title="Permalink to this headline">¶</a></h4>
<p>Setting the ARP Timeout to 1000 seconds via FlexSwitch&#8217;s Python SDK, utilizing method <em>createArpGlobal()</em>.</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;*Switch IP*&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*</span><span class="p">)</span><span class="o">.</span><span class="n">createArpGlobal</span><span class="p">(</span><span class="s2">&quot;&lt;*VRF*&gt;&quot;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;*Timeout*&quot;</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="11%" />
<col width="11%" />
<col width="41%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">createArpGlobal</td>
<td>Vrf</td>
<td>string</td>
<td>VRF name where configuration is applied.</td>
<td>No</td>
<td>&#8220;default&#8221;</td>
</tr>
<tr class="row-odd"><td>Timeout</td>
<td>integer</td>
<td>Length of ARP timeout in seconds.</td>
<td>Yes</td>
<td>600s</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Below are examples for utilizing this method via the Python CLI, python script and Displaying the results</p>
<ol class="arabic simple">
<li>Python CLI:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createArpGlobal</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;45dff5a0-7dc1-441d-723d-ccf731186ece&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllArpGlobals</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;Vrf&#39;: u&#39;default&#39;, u&#39;Timeout&#39;: 1000}, u&#39;ObjectId&#39;: u&#39;45dff5a0-7dc1-441d-723d-ccf731186ece&#39;},</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the ObjectID and UUID are the same.</p>
</div>
<ol class="arabic simple" start="2">
<li>Utilizing a Python Script to set ARP timeout</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">Timeout</span><span class="o">=</span><span class="mi">1000</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="n">restIf</span><span class="o">.</span><span class="n">createArpGlobal</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="n">Timeout</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Display results of this change:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">restIf</span><span class="o">.</span><span class="n">getAllArpGlobals</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>acasella@snaproute-lab-r710-1:~$ python getarpglobal.py
[
    {
        &quot;Object&quot;: {
            &quot;Vrf&quot;: &quot;default&quot;,
            &quot;Timeout&quot;: 1000
        },
        &quot;ObjectId&quot;: &quot;e607400d-71f1-4fd2-4574-e40d313fd3e7&quot;
    }
]
</pre></div>
</div>
</div>
<div class="section" id="configuring-via-configuration-file">
<h4>1.1.1.3&nbsp;&nbsp;&nbsp;Configuring via Configuration file<a class="headerlink" href="#configuring-via-configuration-file" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<hr class="docutils" />
<div class="section" id="configuring-static-entries">
<h3>1.1.2&nbsp;&nbsp;&nbsp;Configuring Static Entries<a class="headerlink" href="#configuring-static-entries" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>1.1.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>FlexSwitch has a REST based API, and below is an example utilzing Linux cURL:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IP&quot;:&quot;&lt;*IPv4 Address*&gt;&quot;, &quot;MAC&quot;:&quot;&lt;*MAC address*&gt;&quot;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/ArpConfig&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="54%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IP</td>
<td>String</td>
<td>IPv4 address to have a static entry applied</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>MAC</td>
<td>String</td>
<td>Layer 2 MAC address associated with IPv4 address.</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@5b5a8d783113</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;{&quot;IP&quot;:&quot;192.168.0.1&quot;, &quot;MAC&quot;:&quot;01:23:34:56:78&quot;}&#39; http://localhost:8080/public/v1/config/ArpConfig</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;a97b920d-8b10-47b1-7ea9-890b07f6e712&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>


<span class="n">root</span><span class="nd">@5b5a8d783113</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X GET --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; http://localhost:8080/public/v1/config/ArpConfigs | python -m json.tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">174</span>  <span class="mi">100</span>   <span class="mi">174</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">87087</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">169</span><span class="n">k</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;IP&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAC&quot;</span><span class="p">:</span><span class="s2">&quot;01:23:34:56:78&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;a97b920d-8b10-47b1-7ea9-890b07f6e712&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4>1.1.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Setting a static arp entry via FlexSwitch&#8217;s Python SDK, utilizing method <em>createArpStatic()</em>.</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createArpStatic</span><span class="p">(</span><span class="o">&lt;*</span><span class="n">IPv4Address</span><span class="o">*&gt;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">MAC</span><span class="o">*&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="11%" />
<col width="11%" />
<col width="45%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">createArpStatic</td>
<td>IP</td>
<td>String</td>
<td>IPv4 address to have a static entry applied</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>MAC</td>
<td>String</td>
<td>Layer 2 MAC address associated with IPv4 address.</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Below are examples for utilizing this method via the Python CLI, python script and displaying the results:</p>
<ol class="arabic simple">
<li>Python CLI:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createArpStatic</span><span class="p">(</span><span class="s2">&quot;50.1.1.10&quot;</span><span class="p">,</span><span class="s2">&quot;01:23:34:56:78&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;9e81f7d4-f9f0-4c86-556b-6398e47897bc&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Utilizing a Python Script to set Static ARP:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">Timeout</span><span class="o">=</span><span class="mi">1000</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="n">arp_ip</span><span class="o">=</span><span class="s2">&quot;192.168.0.1&quot;</span>
        <span class="n">mac</span><span class="o">=</span><span class="s2">&quot;01:23:34:56:78&quot;</span>
        <span class="n">restIf</span><span class="o">.</span><span class="n">createArpStatic</span><span class="p">(</span><span class="n">arp_ip</span><span class="p">,</span><span class="n">mac</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Display results of this change:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">restIf</span><span class="o">.</span><span class="n">getAllArpStatics</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>acasella@snaproute-lab-r710-1:~$ ./getarpstatic.py
[
   {
       &quot;Object&quot;: {
           &quot;IP&quot;: &quot;192.168.0.1&quot;,
           &quot;MAC&quot;:&quot;01:23:34:56:78&quot;
       },
       &quot;ObjectId&quot;: &quot;a97b920d-8b10-47b1-7ea9-890b07f6e712&quot;
   }
]
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>1.1.2.3&nbsp;&nbsp;&nbsp;Configuring via Configuration file<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<hr class="docutils" />
<div class="section" id="display-arp-entry">
<h3>1.1.3&nbsp;&nbsp;&nbsp;Display ARP Entry<a class="headerlink" href="#display-arp-entry" title="Permalink to this headline">¶</a></h3>
<div class="section" id="display-all-arp-entries">
<h4>1.1.3.1&nbsp;&nbsp;&nbsp;Display All ARP Entries<a class="headerlink" href="#display-all-arp-entries" title="Permalink to this headline">¶</a></h4>
<div class="section" id="display-via-rest-api">
<h5>1.1.3.1.1&nbsp;&nbsp;&nbsp;Display via Rest API<a class="headerlink" href="#display-via-rest-api" title="Permalink to this headline">¶</a></h5>
<p>Utilizing the GetBulk API for ARP, &#8220;<em>ArpEntrys</em>&#8221;, we can display all ARP entries learned on the device.</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/state/ArpEntrys&#39;</span>
</pre></div>
</div>
<p>OPTIONS</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@5c3bca6fb77e</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X GET --header &#39;Content-Type: application/json&#39; &#39;http://localhost:8080/public/v1/state/ArpEntrys&#39; | python -m json.tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">213</span>  <span class="mi">100</span>   <span class="mi">213</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">44654</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">53250</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;ExpiryTimeLeft&quot;</span><span class="p">:</span> <span class="s2">&quot;9m57.74904463s&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Intf&quot;</span><span class="p">:</span> <span class="s2">&quot;eth1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;IpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;51.1.1.5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;4e:8c:3d:c8:d4:09&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Vlan&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="displaying-via-python-sdk">
<h5>1.1.3.1.2&nbsp;&nbsp;&nbsp;Displaying via Python SDK<a class="headerlink" href="#displaying-via-python-sdk" title="Permalink to this headline">¶</a></h5>
<p>Displaying all ARP entries utilizing FlexSwitch&#8217;s Python SDK, utilizing method <em>getAllArpEntryStates()</em></p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getAllArpEntryStates</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">getAllArpEntryStates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>Below are examples for utilizing this method via the Python CLI, python script and displaying the results:</p>
<p>1. Python CLI</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllArpEntryStates</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;Intf&#39;: u&#39;fpPort47&#39;, u&#39;Vlan&#39;: u&#39;Internal Vlan&#39;, u&#39;IpAddr&#39;: u&#39;172.16.0.14&#39;, u&#39;ExpiryTimeLeft&#39;: u&#39;9m24.869691096s&#39;, u&#39;MacAddr&#39;: u&#39;a8:9d:21:aa:8e:01&#39;}, u&#39;ObjectId&#39;: u&#39;&#39;}, {u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;Intf&#39;: u&#39;fpPort49&#39;, u&#39;Vlan&#39;: u&#39;Internal Vlan&#39;, u&#39;IpAddr&#39;: u&#39;172.16.0.20&#39;, u&#39;ExpiryTimeLeft&#39;: u&#39;9m43.991376701s&#39;, u&#39;MacAddr&#39;: u&#39;00:02:03:04:05:00&#39;}, u&#39;ObjectId&#39;: u&#39;&#39;}]</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Utilizing a Python Script pretty print Arp Entries</li>
</ol>
<p>You can display the results of this change with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">restIf</span><span class="o">.</span><span class="n">getAllArpEntryStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>acasella@snaproute-lab-r710-1:~$ python getAllArpEntry.py
[
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;Intf&quot;: &quot;fpPort47&quot;,
                        &quot;Vlan&quot;: &quot;Internal Vlan&quot;,
                        &quot;IpAddr&quot;: &quot;172.16.0.14&quot;,
                        &quot;ExpiryTimeLeft&quot;: &quot;16m38.415016779s&quot;,
                        &quot;MacAddr&quot;: &quot;a8:9d:21:aa:8e:01&quot;
                },
                &quot;ObjectId&quot;: &quot;&quot;
        },
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;Intf&quot;: &quot;fpPort49&quot;,
                        &quot;Vlan&quot;: &quot;Internal Vlan&quot;,
                        &quot;IpAddr&quot;: &quot;172.16.0.20&quot;,
                        &quot;ExpiryTimeLeft&quot;: &quot;16m29.520461011s&quot;,
                        &quot;MacAddr&quot;: &quot;00:02:03:04:05:00&quot;
                },
                &quot;ObjectId&quot;: &quot;&quot;
        }
]
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="display-a-specific-arp-entry">
<h4>1.1.3.2&nbsp;&nbsp;&nbsp;Display a specific ARP entry<a class="headerlink" href="#display-a-specific-arp-entry" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id4">
<h5>1.1.3.2.1&nbsp;&nbsp;&nbsp;Display via Rest API<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<p>You can return the value of an object based on any of the variables within that object.  For example you can query an ARP entry via an IPv4 Address.</p>
<p>The example below will show how to grab a specific ARP entry by IP address.</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IpAddr&quot;:&quot;&lt;*IPv4 Address*&gt;&quot;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/state/ArpEntry&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="47%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IpAddr</td>
<td>String</td>
<td>IPv4 Address ArpEntry to be queried</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@5c3bca6fb77e</span><span class="p">:</span><span class="o">/</span><span class="c1"># curl -X GET --header &#39;Content-Type: application/json&#39; -d &#39;{&quot;IpAddr&quot;:&quot;51.1.1.5&quot;}&#39; &#39;http://localhost:8080/public/v1/state/ArpEntry&#39; | python -m json.tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">157</span>  <span class="mi">100</span>   <span class="mi">136</span>  <span class="mi">100</span>    <span class="mi">21</span>  <span class="mi">25185</span>   <span class="mi">3888</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">27200</span>
<span class="p">{</span>
    <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ExpiryTimeLeft&quot;</span><span class="p">:</span> <span class="s2">&quot;9m56.277773536s&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Intf&quot;</span><span class="p">:</span> <span class="s2">&quot;eth1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;IpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;51.1.1.5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;4e:8c:3d:c8:d4:09&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Vlan&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h5>1.1.3.2.2&nbsp;&nbsp;&nbsp;Displaying via Python SDK<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>Displaying all ARP entries utilizing FlexSwitch&#8217;s Python SDK, utilizing method <em>getArpEntryStates()</em></p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getArpEntryState</span><span class="p">(</span><span class="s2">&quot;&lt;*IPv4Address*&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="7%" />
<col width="40%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>getArpEntryState</td>
<td>IPv4Address</td>
<td>String</td>
<td>IPv4 Address ArpEntry to be queried</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getArpEntryState</span><span class="p">(</span><span class="s2">&quot;172.16.0.20&quot;</span><span class="p">)</span>
<span class="go">({u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;Intf&#39;: u&#39;fpPort49&#39;, u&#39;Vlan&#39;: u&#39;Internal Vlan&#39;, u&#39;IpAddr&#39;: u&#39;172.16.0.20&#39;, u&#39;ExpiryTimeLeft&#39;: u&#39;16m38.505153914s&#39;, u&#39;MacAddr&#39;: u&#39;00:02:03:04:05:00&#39;}, u&#39;ObjectId&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">You can pretty print the results with the following python script:</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">restIf</span><span class="o">.</span><span class="n">getArpEntryState</span><span class="p">(</span><span class="s2">&quot;172.16.0.20&quot;</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>acasella@snaproute-lab-r710-1:~$  python ~/getArpState.py
[
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;Intf&quot;: &quot;fpPort49&quot;,
                        &quot;Vlan&quot;: &quot;Internal Vlan&quot;,
                        &quot;IpAddr&quot;: &quot;172.16.0.20&quot;,
                        &quot;ExpiryTimeLeft&quot;: &quot;16m19.337528389s&quot;,
                        &quot;MacAddr&quot;: &quot;00:02:03:04:05:00&quot;
                },
                &quot;ObjectId&quot;: &quot;&quot;
        },
        null
]
</pre></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="python-sdk-arp-methods">
<h3>1.1.4&nbsp;&nbsp;&nbsp;Python SDK ARP Methods<a class="headerlink" href="#python-sdk-arp-methods" title="Permalink to this headline">¶</a></h3>
<div class="section" id="state-methods">
<h4>1.1.4.1&nbsp;&nbsp;&nbsp;State Methods<a class="headerlink" href="#state-methods" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">getArpEntryState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">IpAddr</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{</span>
            <span class="s1">&#39;IpAddr&#39;</span> <span class="p">:</span> <span class="n">IpAddr</span><span class="p">,</span>
            <span class="p">}</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">stateUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpEntry&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">getArpEntryStateById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objectId</span> <span class="p">):</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">stateUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpEntry&#39;</span><span class="o">+</span><span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">objectId</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="k">def</span> <span class="nf">getAllArpEntryStates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjects</span><span class="p">(</span> <span class="s1">&#39;ArpEntry&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stateUrlBase</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="config-methods">
<h4>1.1.4.2&nbsp;&nbsp;&nbsp;Config Methods<a class="headerlink" href="#config-methods" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">.. automethod :: createArpConfig(self,</span>
<span class="sd">    :param string ArpConfigKey :  Arp config  Arp config</span>
<span class="sd">    :param integer Timeout :  Global Arp entry timeout value. Default value  Global Arp entry timeout value. Default value</span>

<span class="sd">    &quot;&quot;&quot;</span>
<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">createArpConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">ArpConfigKey</span><span class="p">,</span>
                    <span class="n">Timeout</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{</span>
            <span class="s1">&#39;ArpConfigKey&#39;</span> <span class="p">:</span> <span class="n">ArpConfigKey</span><span class="p">,</span>
            <span class="s1">&#39;Timeout&#39;</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">Timeout</span><span class="p">),</span>
            <span class="p">}</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">updateArpConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">ArpConfigKey</span><span class="p">,</span>
                    <span class="n">Timeout</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{}</span>
    <span class="k">if</span> <span class="n">ArpConfigKey</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">:</span>
        <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;ArpConfigKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ArpConfigKey</span>

    <span class="k">if</span> <span class="n">Timeout</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">:</span>
        <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;Timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Timeout</span><span class="p">)</span>

    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">updateArpConfigById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">objectId</span><span class="p">,</span>
                         <span class="n">Timeout</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{</span><span class="s1">&#39;objectId&#39;</span><span class="p">:</span> <span class="n">objectId</span> <span class="p">}</span>
    <span class="k">if</span> <span class="n">Timeout</span> <span class="o">!=</span>  <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;Timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Timeout</span>

    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">deleteArpConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">ArpConfigKey</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{</span>
            <span class="s1">&#39;ArpConfigKey&#39;</span> <span class="p">:</span> <span class="n">ArpConfigKey</span><span class="p">,</span>
            <span class="p">}</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">deleteArpConfigById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objectId</span> <span class="p">):</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span><span class="o">+</span><span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">objectId</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">getArpConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">ArpConfigKey</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span>  <span class="p">{</span>
            <span class="s1">&#39;ArpConfigKey&#39;</span> <span class="p">:</span> <span class="n">ArpConfigKey</span><span class="p">,</span>
            <span class="p">}</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">stateUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="nd">@processReturnCode</span>
<span class="k">def</span> <span class="nf">getArpConfigById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objectId</span> <span class="p">):</span>
    <span class="n">reqUrl</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">stateUrlBase</span><span class="o">+</span><span class="s1">&#39;ArpConfig&#39;</span><span class="o">+</span><span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">objectId</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reqUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="k">def</span> <span class="nf">getAllArpConfigs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjects</span><span class="p">(</span> <span class="s1">&#39;ArpConfig&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfgUrlBase</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="configuring-bfd">
<h2>1.2&nbsp;&nbsp;&nbsp;Configuring BFD<a class="headerlink" href="#configuring-bfd" title="Permalink to this headline">¶</a></h2>
<p>BFD provides an independent method to validate the operation of the forwarding plane between two routers.
This can be utilized to ensure subsecond detection of a failure and be utilized to trigger an action in a routing protocol (severing a session or adjacency).</p>
<div class="section" id="bfd-support">
<h3>1.2.1&nbsp;&nbsp;&nbsp;BFD Support<a class="headerlink" href="#bfd-support" title="Permalink to this headline">¶</a></h3>
<p>BFD supports the following options:</p>
<blockquote>
<div><ul class="simple">
<li>Asynchronous mode</li>
<li>Demand mode</li>
<li>Authentication</li>
<li>BGP peer failure detection</li>
</ul>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="bfd-operation">
<h3>1.2.2&nbsp;&nbsp;&nbsp;BFD Operation<a class="headerlink" href="#bfd-operation" title="Permalink to this headline">¶</a></h3>
<p>Flexswitch&#8217;s BFD implementation was designed to allow for single or multi-hop session establishment. This is done by either having an IP based BFD session, where there could be one of many layer 3 hops between the two devices
or interface based sessions, where the BFD peer, much be directly attached.  This allows for BFD sessions to be tied an interface based protocol, such as OSPF vs a peer-based protocol, such as BGP.</p>
<hr class="docutils" />
<div class="section" id="session-establishment">
<h4>1.2.2.1&nbsp;&nbsp;&nbsp;Session Establishment<a class="headerlink" href="#session-establishment" title="Permalink to this headline">¶</a></h4>
<p>BFD session establishments begins by implementing a slow timer, by setting the <em>Desired min Tx Interval</em> to 2000 ms with a multiplier of 3, resulting in a 6000ms timeout for hello packets that are sent.
This is done to ensure proper interoperability between 3rd-party peers by ensuring the appropriate BFD parameters are correctly negotiated; I.E. RemoteDiscriminator, SessionState and failure detection timers.
Once this information is negotiated, we begin to send BFD hello packets at the configured rate.</p>
<p>If a BFD session does not see hello packets within the configured <em>Required min Rx Interval</em>, three things occur:</p>
<blockquote>
<div><ol class="arabic simple">
<li>BFD session state is set to down</li>
<li>Any associated protocol sessions are torn down</li>
<li>BFD will flush the learned Remote Discriminator</li>
</ol>
</div></blockquote>
<p>If BFD is associated to a particular protocol, BFD will hold down that protocols session state, until the associated routing-protocol or user-created session is reset by an administrator.   If BFD is brought administratively-down (either locally or remotely), the BFD session is cleared without any impact
to the associated protocol and only the BFD session is self is torn down.</p>
<p>For details surrounding specific routing protocol implementations, check out the &#8220;BGP with BFD&#8221; or &#8220;OSPF with BFD&#8221; sections.</p>
</div>
<div class="section" id="demand-mode">
<h4>1.2.2.2&nbsp;&nbsp;&nbsp;Demand Mode<a class="headerlink" href="#demand-mode" title="Permalink to this headline">¶</a></h4>
<p>In demand mode, no Hello packets are exchanged after the session is established; it is assumed that the endpoints have another way to verify connectivity to each other, perhaps on the underlying physical layer.</p>
</div>
<div class="section" id="protocol-specific-failure-detection">
<h4>1.2.2.3&nbsp;&nbsp;&nbsp;Protocol Specific Failure Detection<a class="headerlink" href="#protocol-specific-failure-detection" title="Permalink to this headline">¶</a></h4>
<p>For more details on how BFD integrates with other protocols, please see that protocols specific section:</p>
<blockquote>
<div><ul class="simple">
<li>BGP with BFD</li>
<li>OSPF with BFD</li>
</ul>
</div></blockquote>
</div>
</div>
<hr class="docutils" />
<div class="section" id="enabling-bfd">
<h3>1.2.3&nbsp;&nbsp;&nbsp;Enabling BFD<a class="headerlink" href="#enabling-bfd" title="Permalink to this headline">¶</a></h3>
<p>BFD is enabled in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Enable globally (Default when daemon is started)</li>
<li>Creation of BFD session parameter profile</li>
<li>Attach to User created BFD session or a routing protocol</li>
<li>Review configuration and state</li>
</ol>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id6">
<h4>1.2.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="section" id="enable-bfd-globally">
<h5>1.2.3.1.1&nbsp;&nbsp;&nbsp;Enable BFD Globally<a class="headerlink" href="#enable-bfd-globally" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Bfd&quot;:&quot;default&quot;,&quot;Enable&quot;:true}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BfdGlobal&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="56%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Bfd</td>
<td>string</td>
<td>VRF where BFD will be enabled.</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Enable</td>
<td>boolean</td>
<td>IPv4 Address ArpEntry to be queried; I.E. true/false.</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>You need to set the &#8220;<em>Enable</em>&#8221; parameter to &#8220;<em>true</em>&#8221;.  You can also see the &#8220;<em>Bfd</em>&#8221; parameter is set to the name &#8220;<em>default</em>&#8221;.  This value is the
VRF name where BFD will be Globally enabled. By default this is the &#8220;<em>default</em>&#8221; VRF and should not need to be set by the user.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Bfd&quot;:&quot;default&quot;,&quot;Enable&quot;:true}&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdGlobal&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;0880b0cb-d0da-461e-7826-9b2eef1b800e&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-bfd-session-parameters">
<span id="bfd-session-parameters-rest"></span><h5>1.2.3.1.2&nbsp;&nbsp;&nbsp;Creating BFD session parameters<a class="headerlink" href="#creating-bfd-session-parameters" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;&lt;*Param Profile Name*&gt;&quot;,&quot;LocalMultiplier&quot;:3,&quot;DesiredMinTxInterval&quot;:250,&quot;RequiredMinRxInterval&quot;:250,&quot;RequiredMinEchoRxInterval&quot;:0,&quot;DemandEnabled&quot;:false,&quot;AuthenticationEnabled&quot;:false,&quot;AuthKeyId&quot;:1,&quot;AuthData&quot;:&quot;snaproute&quot;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BfdSessionParam&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="8%" />
<col width="58%" />
<col width="7%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the BFD session</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>LocalMultiplier</td>
<td>integer</td>
<td>Multiplier of BFD hello RX interval to wait before tearing down session</td>
<td>no</td>
<td>3</td>
</tr>
<tr class="row-even"><td>DesiredMinTxInterval</td>
<td>integer</td>
<td>Time in milliseconds between interval TX of BFD hello packets</td>
<td>no</td>
<td>1000</td>
</tr>
<tr class="row-odd"><td>RequiredMinRxInterval</td>
<td>integer</td>
<td>Expected interval in milliseconds between RX of BFD  packets</td>
<td>no</td>
<td>1000</td>
</tr>
<tr class="row-even"><td>RequiredMinRxEchoInterval</td>
<td>integer</td>
<td>Expected interval in milliseconds between RX of BFD echo packets</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>DemandEnabled</td>
<td>boolean</td>
<td>Boolean value to specify the global state for BFD demand mode; I.E. true/false</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-even"><td>AuthenticationEnabled</td>
<td>boolean</td>
<td>Boolean value to specify the global state for BFD authentication; I.E. true/false</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>AuthType</td>
<td>string</td>
<td>Authentication type; I.E. keyed MD5, simple, keyed Sha1</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>AuthKeyId</td>
<td>integer</td>
<td>Authentication key ID</td>
<td>no</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>AuthData</td>
<td>string</td>
<td>Authentication string</td>
<td>no</td>
<td>&#8220;snaproute&#8221;</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Here we are creating the BFD session parameters that will be utilized by the BFD session between devices.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>acasella@snaproute-lab-r710-1:~$ curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;{&quot;Name&quot;:&quot;BFD_session&quot;,&quot;LocalMultiplier&quot;:3,&quot;DesiredMinTxInterval&quot;:250,&quot;RequiredMinRxInterval&quot;:250,&quot;RequiredMinEchoRxInterval&quot;:0,&quot;DemandEnabled&quot;:false,&quot;AuthenticationEnabled&quot;:false,&quot;AuthKeyId&quot;:1,&quot;AuthData&quot;:&quot;snaproute&quot;}&#39; &#39;http://10.1.10.43:8080/public/v1/config/BfdSessionParam&#39;
{&quot;ObjectId&quot;:&quot;40ebf60d-1230-4c7b-4c91-bc4a076693d4&quot;,&quot;Error&quot;:&quot;&quot;}
</pre></div>
</div>
</div>
<div class="section" id="attaching-bfd-params-to-a-bfd-session">
<h5>1.2.3.1.3&nbsp;&nbsp;&nbsp;Attaching BFD params to a BFD session<a class="headerlink" href="#attaching-bfd-params-to-a-bfd-session" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>Attaching BFD parameter profile to user create BFD session:</p>
<blockquote>
<div><p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IpAddr&quot;:&quot;&lt;*IPv4 Address*&gt;&quot;,&quot;ParamName&quot;:&quot;&lt;*Param Profile Name*&gt;&quot;,&quot;Interface&quot;:&quot;None&quot;,&quot;Owner&quot;:&quot;user&quot;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BfdSession&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>OPTIONS:</strong></dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="66%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IpAddr</td>
<td>string</td>
<td>BFD neighbor IP address</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>ParaName</td>
<td>string</td>
<td>Name of the session parameters object to be applied on this session</td>
<td>no</td>
<td>&#8220;default&#8221;</td>
</tr>
<tr class="row-even"><td>Interface</td>
<td>boolean</td>
<td>Name of the interface this session has to be established on</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>PerLink</td>
<td>string</td>
<td>Run BFD sessions on individual link of a LAG if the neighbor is reachable through LAG</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-even"><td>Owner</td>
<td>string</td>
<td>Module requesting BFD session configuration</td>
<td>no</td>
<td>user</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p><strong>EXAMPLE:</strong></p>
<p>As you can see below &#8220;ParamName&#8221; variable specifies the BFD parameter profile with a BFD session.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IpAddr&quot;:&quot;1.1.1.1&quot;,&quot;ParamName&quot;:&quot;BFD_session&quot;,&quot;Interface&quot;:&quot;None&quot;,&quot;Owner&quot;:&quot;user&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdSession&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>Attaching BFD parameter profile to protocol created BFD session:</p>
<blockquote>
<div><p>For more details on how BFD integrates with other protocols, please goto that protocols specific section:</p>
<blockquote>
<div><ul class="simple">
<li>BGP with BFD</li>
<li>OSPF with BFD</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="configuring-bfd-demand-mode">
<h5>1.2.3.1.4&nbsp;&nbsp;&nbsp;Configuring BFD demand mode<a class="headerlink" href="#configuring-bfd-demand-mode" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="configuring-bfd-authentication">
<h5>1.2.3.1.5&nbsp;&nbsp;&nbsp;Configuring BFD Authentication<a class="headerlink" href="#configuring-bfd-authentication" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="displaying-configuration-and-state">
<h5>1.2.3.1.6&nbsp;&nbsp;&nbsp;Displaying Configuration and State<a class="headerlink" href="#displaying-configuration-and-state" title="Permalink to this headline">¶</a></h5>
<p>Display BFD session parameter profile configuration:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdSessionParams&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>We can start by looking at the BFD configuration of was setup in the example sections above.  We can view the session parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdSessionParams&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">386</span>  <span class="mi">100</span>   <span class="mi">386</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">51411</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">55142</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AuthData&quot;</span><span class="p">:</span> <span class="s2">&quot;snaproute&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;AuthKeyId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;AuthType&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;AuthenticationEnabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;DemandEnabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;DesiredMinTxInterval&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
                                <span class="s2">&quot;LocalMultiplier&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;BFD_session&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinEchoRxInterval&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinRxInterval&quot;</span><span class="p">:</span> <span class="mi">250</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;4c46080c-f4c1-477b-6ce3-873aee89ab9c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Display BFD Session configuration:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdSessions&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>Below we can see the BFD Session Parameter profile &#8220;BFD_Session&#8221;: parameter profile as well:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/config/BfdSessions&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">431</span>  <span class="mi">100</span>   <span class="mi">431</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">64987</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">71833</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;Interface&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;IpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Owner&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ParamName&quot;</span><span class="p">:</span> <span class="s2">&quot;BFD_session&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PerLink&quot;</span><span class="p">:</span> <span class="n">false</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;b825914b-5b6c-4c5f-6a65-a80fc958d38d&quot;</span>
                <span class="p">},</span>
</pre></div>
</div>
<p>Display BFD Session Parameter State:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/state/BfdSessionParams&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>When we look at the BfdSessionParams status, we see very similar data to that of the configuration, but there are a few very important differences:</p>
<ol class="arabic simple">
<li>This indicated that BFDd has ingested the configuration and is ready to begin utilizing it.</li>
<li>State related items to show us how this configuration is being utilized.</li>
</ol>
<p>If we look at the &#8220;NumSessions&#8221; variable, we can see this BFD session parameter profile is being utilized by 1 BFD session. We can also see that the
millisecond variables we utilized in the configuration have been changed to microseconds.  This is done for RFC compliance and interoperability with 3rd-party
BFD implementations.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.43:8080/public/v1/state/BfdSessionParams&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">789</span>  <span class="mi">100</span>   <span class="mi">789</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">55657</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">60692</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AuthenticationData&quot;</span><span class="p">:</span> <span class="s2">&quot;snaproute&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;AuthenticationEnabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthenticationKeyId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;AuthenticationType&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;DemandEnabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;DesiredMinTxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;LocalMultiplier&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;BFD_session&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NumSessions&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinEchoRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;0(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;4c46080c-f4c1-477b-6ce3-873aee89ab9c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Display BFD Session State:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/state/BfdSessions&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>The BfdSessions state API responds with the relevant state of all BFD sessions.  We can see the current BFD timers being utilized, the BFD Parameter Profile this information was
inherited via the <em>ParamName</em> variable, BFD_Sessions in this case. As well aa BFD session status via <em>SessionState</em> variable, which is up and working.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/state/BfdSessions&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">1391</span>  <span class="mi">100</span>  <span class="mi">1391</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">95371</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">99357</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AuthSeqKnown&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthType&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;DemandMode&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;DesiredMinTxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;DetectionMultiplier&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;IfName&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;InterfaceSpecific&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;IpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;LocalDiagType&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;LocalDiscriminator&quot;</span><span class="p">:</span> <span class="mi">979</span><span class="p">,</span>
                                <span class="s2">&quot;LocalMacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NumRxPackets&quot;</span><span class="p">:</span> <span class="mi">217275</span><span class="p">,</span>
                                <span class="s2">&quot;NumTxPackets&quot;</span><span class="p">:</span> <span class="mi">199389</span><span class="p">,</span>
                                <span class="s2">&quot;ParamName&quot;</span><span class="p">:</span> <span class="s2">&quot;BFD_Sessions&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PerLinkSession&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;ReceivedAuthSeq&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RegisteredProtocols&quot;</span><span class="p">:</span> <span class="s2">&quot;user, &quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteDemandMode&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteDiscriminator&quot;</span><span class="p">:</span> <span class="mi">533</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteMacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteMinRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteSessionState&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;SentAuthSeq&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionId&quot;</span><span class="p">:</span> <span class="mi">979</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id7">
<h4>1.2.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id8">
<h5>1.2.3.2.1&nbsp;&nbsp;&nbsp;Enable BFD Globally<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdGlobal</span><span class="p">(</span><span class="n">Bfd</span><span class="o">=&lt;*</span><span class="n">VRF</span> <span class="n">Name</span><span class="o">*&gt;</span> <span class="p">,</span> <span class="n">Enable</span><span class="o">=&lt;*</span><span class="n">true</span><span class="o">/</span><span class="n">false</span><span class="o">*&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="13%" />
<col width="12%" />
<col width="36%" />
<col width="10%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">createBfdGlobal</td>
<td>Bfd</td>
<td>string</td>
<td>VRF Name where BFD is enabled</td>
<td>Yes</td>
<td>&#8220;default&#8221;</td>
</tr>
<tr class="row-odd"><td>Enable</td>
<td>boolean</td>
<td>Enable BFD within specified VRF</td>
<td>Yes</td>
<td>true</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>You need to set the &#8220;<em>Enable</em>&#8221; parameter to &#8220;<em>true</em>&#8221;.  You can also see the &#8220;<em>Bfd</em>&#8221; parameter is set to the name &#8220;<em>default</em>&#8221;.  This value is the
VRF name where BFD will be Globally enabled. By default this is the &#8220;<em>default</em>&#8221; VRF and should not need to be set by the user.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdGlobal</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;5b4a4b49-7310-444e-64da-5d8e8764e914&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<p>Can be applied with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="n">restIf</span><span class="o">.</span><span class="n">createBfdGlobal</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bfd-session-parameters-python">
<span id="id9"></span><h5>1.2.3.2.2&nbsp;&nbsp;&nbsp;Creating BFD session parameters<a class="headerlink" href="#bfd-session-parameters-python" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdSessionParam</span><span class="p">(</span><span class="o">&lt;*</span><span class="n">Name</span><span class="o">*&gt;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">LocalMultiplier</span><span class="o">*&gt;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">DesiredMinTxInterval</span><span class="o">*&gt;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">RequiredMinRxInterval</span><span class="o">*&gt;</span><span class="p">,</span><span class="o">&lt;*</span><span class="n">RequiredMinRxEchoInterval</span><span class="o">*&gt;</span><span class="p">,</span><span class="o">&lt;*</span><span class="n">DemandEnabled</span><span class="o">*&gt;</span><span class="p">,</span><span class="o">&lt;*</span><span class="n">AuthenticationEnabled</span><span class="o">*&gt;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">AuthKeyId</span><span class="o">*&gt;</span><span class="p">,</span><span class="o">&lt;*</span><span class="n">AuthData</span><span class="o">*&gt;</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="16%" />
<col width="7%" />
<col width="49%" />
<col width="6%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9">createBfdSessionParam</td>
<td>Name</td>
<td>string</td>
<td>Name of the BFD session</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>LocalMultiplier</td>
<td>integer</td>
<td>Multiplier of BFD hello RX interval to wait before tearing down session</td>
<td>no</td>
<td>3</td>
</tr>
<tr class="row-even"><td>DesiredMinTxInterval</td>
<td>integer</td>
<td>Time in milliseconds between interval TX of BFD hello packets</td>
<td>no</td>
<td>1000</td>
</tr>
<tr class="row-odd"><td>RequiredMinRxInterval</td>
<td>integer</td>
<td>Expected interval in milliseconds between RX of BFD  packets</td>
<td>no</td>
<td>1000</td>
</tr>
<tr class="row-even"><td>RequiredMinRxEchoInterval</td>
<td>integer</td>
<td>Expected interval in milliseconds between RX of BFD echo packets</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>DemandEnabled</td>
<td>boolean</td>
<td>Boolean value to specify the global state for BFD demand mode; I.E. true/false</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-even"><td>AuthenticationEnabled</td>
<td>boolean</td>
<td>Boolean value to specify the global state for BFD authentication; I.E. true/false</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>AuthKeyId</td>
<td>integer</td>
<td>Authentication key ID</td>
<td>no</td>
<td>1</td>
</tr>
<tr class="row-even"><td>AuthData</td>
<td>string</td>
<td>Authentication string</td>
<td>no</td>
<td>&#8220;snaproute&#8221;</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Here we are creating the BFD session parameters that will be utilized by the BFD session between devices.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdSessionParam</span><span class="p">(</span><span class="s2">&quot;BFD_Session&quot;</span><span class="p">,</span> <span class="n">LocalMultiplier</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">RequiredMinRxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">DesiredMinTxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;5b4a4b49-7310-444e-64da-5d8e8764e914&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<p>Can be applied with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="n">restIf</span><span class="o">.</span><span class="n">createBfdSessionParam</span><span class="p">(</span><span class="s2">&quot;BFD_Session&quot;</span><span class="p">,</span> <span class="n">LocalMultiplier</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">RequiredMinRxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">DesiredMinTxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h5>1.2.3.2.3&nbsp;&nbsp;&nbsp;Attaching BFD params to a BFD session<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>Attaching BFD parameter profile to user create BFD session:</p>
<blockquote>
<div><p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdSession</span><span class="p">(</span><span class="n">ParaName</span><span class="o">=&lt;*</span><span class="n">Name</span><span class="o">*&gt;</span><span class="p">,</span> <span class="n">IpAddr</span><span class="o">=&lt;*</span><span class="n">IPv4</span> <span class="n">Address</span><span class="o">*&gt;</span><span class="p">,</span> <span class="n">Interface</span><span class="o">=&lt;*</span><span class="n">L3</span> <span class="n">interface</span><span class="o">*&gt;</span><span class="p">,</span> <span class="n">PerLink</span><span class="o">=&lt;*</span><span class="n">perlink</span><span class="o">*&gt;</span><span class="p">,</span><span class="n">Owner</span><span class="o">=&lt;*</span><span class="n">BFD</span> <span class="n">owner</span><span class="o">*&gt;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>OPTIONS</strong></dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="13%" />
<col width="7%" />
<col width="8%" />
<col width="58%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5">createBfdSession</td>
<td>IpAddr</td>
<td>string</td>
<td>BFD neighbor IP address</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>ParaName</td>
<td>string</td>
<td>Name of the session parameters object to be applied on this session</td>
<td>no</td>
<td>&#8220;default&#8221;</td>
</tr>
<tr class="row-even"><td>Interface</td>
<td>boolean</td>
<td>Name of the interface this session has to be established on</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>PerLink</td>
<td>string</td>
<td>Run BFD sessions on individual link of a LAG if the neighbor is reachable through LAG</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-even"><td>Owner</td>
<td>string</td>
<td>Module requesting BFD session configuration</td>
<td>no</td>
<td>user</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p><strong>EXAMPLE</strong>
As you can see below &#8220;ParamName&#8221; variable specifies the BFD parameter profile with a BFD session.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdSession</span><span class="p">(</span><span class="n">ParaName</span><span class="o">=</span><span class="s2">&quot;BFD_Sessions&quot;</span><span class="p">,</span> <span class="n">IpAddr</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;5b4a4b49-7310-444e-64da-5d8e8764e914&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<p>Can be applied with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">switch_ip</span> <span class="o">=</span> <span class="s2">&quot;10.1.10.243&quot;</span>
        <span class="n">restIf</span> <span class="o">=</span> <span class="n">FlexSwitch</span><span class="p">(</span><span class="n">switch_ip</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
        <span class="n">restIf</span><span class="o">.</span><span class="n">createBfdSession</span><span class="p">(</span><span class="n">ParaName</span><span class="o">=</span><span class="s2">&quot;BFD_Sessions&quot;</span><span class="p">,</span> <span class="n">IpAddr</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Attaching BFD parameter profile to protocol created BFD session:</p>
<blockquote>
<div><p>For more details on how BFD integrates with other protocols, please goto that protocols specific section:</p>
<blockquote>
<div><ul class="simple">
<li>BGP with BFD</li>
<li>OSPF with BFD</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id11">
<h5>1.2.3.2.4&nbsp;&nbsp;&nbsp;Configuring BFD demand mode<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="id12">
<h5>1.2.3.2.5&nbsp;&nbsp;&nbsp;Configuring BFD Authentication<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="id13">
<h5>1.2.3.2.6&nbsp;&nbsp;&nbsp;Displaying Configuration and State<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<p>Display BFD session parameter profile configuration:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionParams</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>We can start by looking at the BFD configuration of was setup in the example sections above.  We can view the session parameters via python CLI:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionParams</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;RequiredMinRxInterval&#39;: 250, u&#39;AuthType&#39;: u&#39;simple&#39;, u&#39;Name&#39;: u&#39;Session1&#39;, u&#39;AuthKeyId&#39;: 1, u&#39;AuthData&#39;: u&#39;snaproute&#39;, u&#39;DesiredMinTxInterval&#39;: 250, u&#39;AuthenticationEnabled&#39;: False, u&#39;DemandEnabled&#39;: False, u&#39;RequiredMinEchoRxInterval&#39;: 0, u&#39;LocalMultiplier&#39;: 3}, u&#39;ObjectId&#39;: u&#39;376eebef-4061-45e8-77c4-058b4b501deb&#39;}]</span>
</pre></div>
</div>
<p>Can be viewed with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#!/usr/bin/python
import json
from flexswitchV2 import FlexSwitch


if __name__ ==&#39;__main__&#39;:
        switch_ip = &quot;10.1.10.243&quot;
        restIf = FlexSwitch(switch_ip, 8080)
        json.dumps(restIf.getAllBfdSessionParams(), indent=4)

acasella@snaproute-lab-r710-1:~$ python get_bfd.py

[
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;RequiredMinRxInterval&quot;: 250,
                        &quot;AuthType&quot;: &quot;simple&quot;,
                        &quot;Name&quot;: &quot;Session1&quot;,
                        &quot;AuthKeyId&quot;: 1,
                        &quot;AuthData&quot;: &quot;snaproute&quot;,
                        &quot;DesiredMinTxInterval&quot;: 250,
                        &quot;AuthenticationEnabled&quot;: false,
                        &quot;DemandEnabled&quot;: false,
                        &quot;RequiredMinEchoRxInterval&quot;: 0,
                        &quot;LocalMultiplier&quot;: 3
                },
                &quot;ObjectId&quot;: &quot;376eebef-4061-45e8-77c4-058b4b501deb&quot;
        }
]
</pre></div>
</div>
<p>Display BFD Session configuration:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>Below we can see the BFD Session Parameter profile &#8220;BFD_Session&#8221;: parameter profile as well:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessions</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;IpAddr&#39;: u&#39;1.1.1.1&#39;, u&#39;PerLink&#39;: False, u&#39;Owner&#39;: u&#39;user&#39;, u&#39;ParamName&#39;: u&#39;BFD_Sessions&#39;, u&#39;Interface&#39;: u&#39;None&#39;}, u&#39;ObjectId&#39;: u&#39;b37cd681-90ad-487c-4afa-1efae74eda29&#39;}]</span>
</pre></div>
</div>
<p>Can be viewed with the following Python Script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#!/usr/bin/python
import json
from flexswitchV2 import FlexSwitch


if __name__ ==&#39;__main__&#39;:
        switch_ip = &quot;10.1.10.243&quot;
        restIf = FlexSwitch(switch_ip, 8080)
        print json.dumps(restIf.getAllBfdSessions(), indent=4)

acasella@snaproute-lab-r710-1:~$ python get_bfd.py
[
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;IpAddr&quot;: &quot;1.1.1.1&quot;,
                        &quot;PerLink&quot;: false,
                        &quot;Owner&quot;: &quot;user&quot;,
                        &quot;ParamName&quot;: &quot;BFD_Sessions&quot;,
                        &quot;Interface&quot;: &quot;None&quot;
                },
                &quot;ObjectId&quot;: &quot;b37cd681-90ad-487c-4afa-1efae74eda29&quot;
        }
]
</pre></div>
</div>
<p>Display BFD Session Parameter State:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionParamStates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>When we look at the BfdSessionParams status, we see very similar data to that of the configuration, but there are a few very important differences:</p>
<ol class="arabic simple">
<li>This indicated that BFDd has ingested the configuration and is ready to begin utilizing it.</li>
<li>State related items to show us how this configuration is being utilized.</li>
</ol>
<p>If we look at the &#8220;NumSessions&#8221; variable, we can see this BFD session parameter profile is being utilized by 1 BFD session. We can also see that the
millisecond variables we utilized in the configuration have been changed to microseconds.  This is done for RFC compliance and interoperability with 3rd-party
BFD implementations.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionParamStates</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;ConfigObj&#39;: None, u&#39;RequiredMinRxInterval&#39;: u&#39;250000(us)&#39;, u&#39;Name&#39;: u&#39;BFD_Sessions&#39;, u&#39;AuthenticationType&#39;: u&#39;simple&#39;, u&#39;AuthenticationData&#39;: u&#39;snaproute&#39;, u&#39;DesiredMinTxInterval&#39;: u&#39;250000(us)&#39;, u&#39;AuthenticationEnabled&#39;: False, u&#39;DemandEnabled&#39;: False, u&#39;NumSessions&#39;: 0, u&#39;AuthenticationKeyId&#39;: 1, u&#39;RequiredMinEchoRxInterval&#39;: u&#39;0(us)&#39;, u&#39;LocalMultiplier&#39;: 3}, u&#39;ObjectId&#39;: u&#39;376eebef-4061-45e8-77c4-058b4b501deb&#39;}]</span>
</pre></div>
</div>
<p>Can be viewed via the following python script</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#!/usr/bin/python
import json
from flexswitchV2 import FlexSwitch


if __name__ ==&#39;__main__&#39;:
        switch_ip = &quot;10.1.10.243&quot;
        restIf = FlexSwitch(switch_ip, 8080)
        print json.dumps(restIf.getAllBfdSessionParamStates(), indent=4)

acasella@snaproute-lab-r710-1:~$ python get_bfd.py
[
        {
                &quot;Object&quot;: {
                        &quot;ConfigObj&quot;: null,
                        &quot;RequiredMinRxInterval&quot;: &quot;250000(us)&quot;,
                        &quot;Name&quot;: &quot;BFD_Sessions&quot;,
                        &quot;AuthenticationType&quot;: &quot;simple&quot;,
                        &quot;AuthenticationData&quot;: &quot;snaproute&quot;,
                        &quot;DesiredMinTxInterval&quot;: &quot;250000(us)&quot;,
                        &quot;AuthenticationEnabled&quot;: false,
                        &quot;DemandEnabled&quot;: false,
                        &quot;NumSessions&quot;: 0,
                        &quot;AuthenticationKeyId&quot;: 1,
                        &quot;RequiredMinEchoRxInterval&quot;: &quot;0(us)&quot;,
                        &quot;LocalMultiplier&quot;: 3
                },
                &quot;ObjectId&quot;: &quot;376eebef-4061-45e8-77c4-058b4b501deb&quot;
        }
]
</pre></div>
</div>
<p>Display BFD Session State:</p>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionStates</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<p>The BfdSessions state API responds with the relevant state of all BFD sessions.  We can see the current BFD timers being utilized, the BFD Parameter Profile this information was
inherited via the <em>ParamName</em> variable, BFD_Sessions in this case. As well aa BFD session status via <em>SessionState</em> variable, which is up and working.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionStates</span><span class="p">()</span>
<span class="go">[{u&#39;Object&#39;: {u&#39;RegisteredProtocols&#39;: u&#39;user, &#39;, u&#39;DesiredMinTxInterval&#39;: u&#39;250000(us)&#39;, u&#39;SessionId&#39;: 640, u&#39;ParamName&#39;: u&#39;BFD_Sessons&#39;, u&#39;DemandMode&#39;: False, u&#39;DetectionMultiplier&#39;: 3, u&#39;SentAuthSeq&#39;: 0, u&#39;LocalDiscriminator&#39;: 640, u&#39;SessionState&#39;: u&#39;up&#39;, u&#39;AuthSeqKnown&#39;: False, u&#39;PerLinkSession&#39;: False, u&#39;IfName&#39;: u&#39;&#39;, u&#39;ConfigObj&#39;: None, u&#39;RequiredMinRxInterval&#39;: u&#39;250000(us)&#39;, u&#39;AuthType&#39;: u&#39;&#39;, u&#39;RemoteDiscriminator&#39;: 564, u&#39;RemoteSessionState&#39;: u&#39;up&#39;, u&#39;NumTxPackets&#39;: 850068, u&#39;InterfaceSpecific&#39;: False, u&#39;NumRxPackets&#39;: 826751, u&#39;RemoteDemandMode&#39;: False, u&#39;LocalMacAddr&#39;: u&#39;&#39;, u&#39;RemoteMinRxInterval&#39;: u&#39;250000(us)&#39;, u&#39;IpAddr&#39;: u&#39;1.1.1.1&#39;, u&#39;RemoteMacAddr&#39;: u&#39;&#39;, u&#39;LocalDiagType&#39;: u&#39;None&#39;, u&#39;IfIndex&#39;: 49, u&#39;ReceivedAuthSeq&#39;: 0}, u&#39;ObjectId&#39;: u&#39;&#39;}]</span>
</pre></div>
</div>
<p>Can be viewed via the following python script.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>import json
from flexswitchV2 import FlexSwitch


if __name__ ==&#39;__main__&#39;:
        switch_ip = &quot;10.1.10.243&quot;
        restIf = FlexSwitch(switch_ip, 8080)
        print json.dumps(restIf.getAllBfdSessionStates(), indent=4)

acasella@snaproute-lab-r710-1:~$ python get_bfd.py
[
        {
                &quot;Object&quot;: {
                        &quot;RegisteredProtocols&quot;: &quot;user, &quot;,
                        &quot;DesiredMinTxInterval&quot;: &quot;250000(us)&quot;,
                        &quot;SessionId&quot;: 701,
                        &quot;ParamName&quot;: &quot;BFD_Sessions&quot;,
                        &quot;DemandMode&quot;: false,
                        &quot;DetectionMultiplier&quot;: 3,
                        &quot;SentAuthSeq&quot;: 0,
                        &quot;LocalDiscriminator&quot;: 701,
                        &quot;SessionState&quot;: &quot;up&quot;,
                        &quot;AuthSeqKnown&quot;: false,
                        &quot;PerLinkSession&quot;: false,
                        &quot;IfName&quot;: &quot;&quot;,
                        &quot;ConfigObj&quot;: null,
                        &quot;RequiredMinRxInterval&quot;: &quot;250000(us)&quot;,
                        &quot;AuthType&quot;: &quot;&quot;,
                        &quot;RemoteDiscriminator&quot;: 1090519237,
                        &quot;RemoteSessionState&quot;: &quot;up&quot;,
                        &quot;NumTxPackets&quot;: 747461,
                        &quot;InterfaceSpecific&quot;: false,
                        &quot;NumRxPackets&quot;: 908113,
                        &quot;RemoteDemandMode&quot;: false,
                        &quot;LocalMacAddr&quot;: &quot;&quot;,
                        &quot;RemoteMinRxInterval&quot;: &quot;250000(us)&quot;,
                        &quot;IpAddr&quot;: &quot;1.1.1.1&quot;,
                        &quot;RemoteMacAddr&quot;: &quot;&quot;,
                        &quot;LocalDiagType&quot;: &quot;None&quot;,
                        &quot;IfIndex&quot;: 47,
                        &quot;ReceivedAuthSeq&quot;: 0
                },
                &quot;ObjectId&quot;: &quot;&quot;
        }
]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="configuring-bgp">
<h2>1.3&nbsp;&nbsp;&nbsp;Configuring BGP<a class="headerlink" href="#configuring-bgp" title="Permalink to this headline">¶</a></h2>
<p>Border Gateway Protocol (BGP) is a standardized exterior gateway protocol designed to exchange routing and reachability information among autonomous systems (AS) on a network. The protocol is often classified as a path vector protocol but is sometimes also classed as a distance-vector routing protocol.
BGP version 4 is defined by RFC 4271.</p>
<p>Multiprotocol BGPv4+ can exchange routing information based on multiple address families (AFI) and sub-address families (SAFI) simultaneously over a single BGP established session.  Multiprotocol BGP is defined by RFC 4760.</p>
<hr class="docutils" />
<div class="section" id="bgp-operation">
<h3>1.3.1&nbsp;&nbsp;&nbsp;BGP Operation<a class="headerlink" href="#bgp-operation" title="Permalink to this headline">¶</a></h3>
<p>BGP is an exterior gateway protocol, that exchanges prefixes through the same or different autonomous systems over established TCP sessions.</p>
<p>This communication is performed over TCP port 179, and is done via static neighbor relationships configured via an administrator.  BGP is split into two operational schema&#8217;s, IBGP and EBGP.  IGBP peers
function within a single AS, where EBGP peers function to exchange routing information between different AS&#8217;s.  The goal of IBGP is used to exchange routing information throughout the AS, where EBGP peers are
utilized to exchange routing information internal to an AS to another/external AS and vice-versa.</p>
<div class="section" id="id14">
<h4>1.3.1.1&nbsp;&nbsp;&nbsp;Session Establishment<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>BGP utilizes its own finite state machine for establishing connections to exchange routes with another peer. This is done for both TCP session collision handling (ensuring the right TCP session is being utilized, between
two peers), as well as exchanging BGP information over the TCP session utilized.  The following FSM states exists:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first"><strong>Idle</strong> - In this state BGP refuses all incoming BGP connections, initiates a TCP connection with its configured BGP peer and Changes its state to <strong>Connect</strong>.</p>
<blockquote>
<div><ul class="simple">
<li>If an error occurs during FSM process, BGP session is terminated and returns to <strong>Idle</strong> state.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Connect</strong> - Waits for successful TCP negotiation with peer, then sends an OPEN message to the peer.</p>
<blockquote>
<div><ul class="simple">
<li>If successful, the router will transition to the <strong>OpenSent</strong> state.</li>
<li>If unsuccessful, the router will set the <em>ConnectionRetry</em> timer and transition to the <strong>Active</strong> state upon expiry.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Active</strong> - If TCP session establishment was unsuccessful BGP will be placed in this state.  The router will set <em>ConnectionRetry</em> timer to zero, attempt a TCP session establishment then sends an OPEN message to the peer.</p>
<blockquote>
<div><ul class="simple">
<li>If successful, transition to the <strong>OpenSent</strong> state.  If unsuccessful, transitions to the <strong>Idle</strong> state.</li>
<li>Repeated TCP session failures may result in session bouncing between <strong>Active</strong> and <strong>Idle</strong> states.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>OpenSent</strong> - Listens for Open Message from peer.  Once valid message has been received a Keepalive message is sent, various timers are set and the state transitions to <strong>OpenConfirm</strong>.</p>
<blockquote>
<div><ul class="simple">
<li>If there is an error, router then sends a NOTIFICATION message to the peer indicating why the error occurred.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>OpenConfirm</strong> - The Router waits for a keepalive messages from its peer.  If message is received before timer expiry, the router transitions to the <strong>Established</strong> State.</p>
<blockquote>
<div><ul class="simple">
<li>If keep-alive timer expires or an error occurs,  router transitions to <strong>Idle</strong> state.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Established</strong> - Peers exchange UPDATE messages about prefixes they advertise.</p>
<blockquote>
<div><ul class="simple">
<li>If UPDATE message contains an error the router sends a NOTIFICATION message and then transitions to the <strong>Idle</strong> state.</li>
<li>If Keepalive timer expires or if an error condition occurs, the router transitions back to the <strong>Idle</strong> state.</li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<p>During the Established state BGP sessions exchange UPDATE messages about prefixes in which they have connectivity. These UPDATES
contain all the necessary information to forward data to these routes.  The UPDATES include destination prefix, prefix length, AS path, the next hop IP, and additional information which may affect if this route is accepted by the receiving router.</p>
</div>
</div>
<div class="section" id="enabling-globally">
<h3>1.3.2&nbsp;&nbsp;&nbsp;Enabling Globally<a class="headerlink" href="#enabling-globally" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bgp-global-rest">
<span id="id15"></span><h4>1.3.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#bgp-global-rest" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:&lt;*AS Number*&gt;,&quot;RouterId&quot;:&quot;&lt;*IP Addr*&gt;&quot;,&quot;UseMultiplePaths&quot;:&lt;*true/false*&gt;,&quot;EBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;,&quot;UseMultiplePaths&quot;:&lt;*true/false*&gt; ,&quot;IBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPGlobal&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UseMultiplePaths</td>
<td>boolean</td>
<td>Enable/disable ECMP for BGP</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>EBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from External BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>EBGPAllowMultipleAS</td>
<td>boolean</td>
<td>Enable/diable ECMP paths from multiple AS&#8217;s</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>IBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from Internal BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>BGP requires a local AS Number and a Router ID to enable globally.  Once these two items are assigned, BGP will be globally enabled on FlexSwitch.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">AS number and Router Id, MUST be unique per device.</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:65535,&quot;RouterId&quot;:&quot;1.1.1.1&quot;}&#39;</span> <span class="s1">&#39;http://192.168.0.2:8080/public/v1/config/BGPGlobal&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;c5f253d9-1f0d-461e-62aa-963b1ef3b0bd&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="bgp-global-python">
<span id="id16"></span><h4>1.3.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#bgp-global-python" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=&lt;*</span><span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span><span class="p">,</span>
<span class="go">                                                                RouterId=&lt;*IP Addr*&gt;,</span>
<span class="go">                                                                UseMultiplePaths=&lt;*true/false*&gt;,</span>
<span class="go">                                                                EBGPMaxPaths=&lt;*Number of Paths*&gt;,</span>
<span class="go">                                                                EBGPAllowMultipleAS=&lt;*true/false*&gt;,</span>
<span class="go">                                                                IBGPMaxPaths=&lt;*Number of Paths*&gt;,)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="6">createBGPGlobal</td>
<td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UseMultiplePaths</td>
<td>boolean</td>
<td>Enable/disable ECMP for BGP</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>EBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from External BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>EBGPAllowMultipleAS</td>
<td>boolean</td>
<td>Enable/diable ECMP paths from multiple AS&#8217;s</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>IBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from Internal BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>BGP requires a local AS Number and a Router ID to enable globally.  Once these two items are assigned, BGP will be globally enabled on FlexSwitch.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">AS number and Router Id, MUST be unique per device.</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;192.168.0.2&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=</span><span class="mi">65535</span> <span class="p">,</span><span class="n">RouterId</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;61e6ad4b-6bc7-4e35-5c9a-89106728c4b4&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="neighbor-setup">
<h3>1.3.3&nbsp;&nbsp;&nbsp;Neighbor Setup<a class="headerlink" href="#neighbor-setup" title="Permalink to this headline">¶</a></h3>
<p>BGP requires established peering relationships to exchange routing information.  This section will assist in setting up a BGP peer with another device.</p>
<div class="section" id="bgp-neighbor-rest">
<span id="id17"></span><h4>1.3.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#bgp-neighbor-rest" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;PeerAS&quot;:&lt;*Peer AS Number*&gt;,&quot;LocalAS&quot;:&quot;&lt;*Local AS number*&gt;&quot;,&quot;AuthPassword&quot;:&lt;*Password*&gt;,&quot;Description&quot;:&lt;*Peer Description*&gt;,&quot;NeighborAddress&quot;:&lt;*IPv4 Address*&gt; ,&quot;IfIndex&quot;:&lt;*Interface IfIndex*&gt;,&quot;RouteReflectorClusterId&quot;:&lt;*ClusterID*&gt;,&quot;RouteReflectorClient&quot;:&lt;*true/false*&gt;,&quot;MultiHopEnable&quot;:&lt;*true/false*&gt;,&quot;MultiHopTTL&quot;:&lt;*TTL*&gt;, &quot;ConnectRetryTime&quot;:&lt;*Retry Timer*&gt;, &quot;HoldTime&quot;:&lt;*Hold down Timer*&gt;, &quot;KeepAliveTime&quot;:&lt;*Keepalive Timer*&gt;, &quot;AddPathRx&quot;:&lt;*true/false*&gt;, &quot;AddPathsMaxTx&quot;:&lt;*Max Transmit AddPaths*&gt;,&quot;PeerGroup&quot;:&lt;*Peer Group Name*&gt;, &quot;BfdEnable&quot;:&lt;*true/false*&gt;, &quot;BfdSessionParam&quot;:&lt;*Bfd session param profile*&gt;, &quot;MaxPrefixes&quot;&quot;:&lt;*number of prefix&#39;</span><span class="n">s</span><span class="o">*&gt;</span><span class="p">,</span> <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span><span class="o">&lt;*</span><span class="n">Percentage</span> <span class="n">of</span> <span class="n">Prefix</span><span class="s1">&#39;s*&gt;, &quot;MaxPrefixesDisconnect&quot;:&lt;*true/false*&gt;, &quot;MaxPrefixesRestartTimer&quot;:&lt;*Restart Timer*&gt;       }&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPNeighbor&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="8%" />
<col width="61%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PeerAS</td>
<td>integer</td>
<td>Peer AS of the BGP neighbor</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>LocalAS</td>
<td>integer</td>
<td>Local AS of the BGP, overrides Global AS value, can be used to spoof AS number</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>AuthPassword</td>
<td>string</td>
<td>Password to connect to the BGP neighbor</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>string</td>
<td>Description of the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>NeighborAddress</td>
<td>string</td>
<td>Address of the BGP neighbor (required if IfIndex is not supplied)</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>IfIndex</td>
<td>integer</td>
<td>Interface of BGP neighbor (required if NeighborAddress is not supplied)</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr class="row-even"><td>RouteReflectorClusterId</td>
<td>integer</td>
<td>Cluster ID of the internal BGP neighbor router reflector client</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>RouteReflectorClient</td>
<td>boolean</td>
<td>Set/Clear BGP neighbor as a route reflector client</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MultiHopEnable</td>
<td>boolean</td>
<td>Enable/Disable multihop for BGP neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MultiHopTTL</td>
<td>string</td>
<td>Number of hops(TTL) to multi-hop BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ConnectRetryTime</td>
<td>integer</td>
<td>Retry timer for BGP session reconnect attempt after disconnect/failure</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>HoldTime</td>
<td>integer</td>
<td>Hold down time for BGP neighbor failure/disconnect</td>
<td>no</td>
<td>180s</td>
</tr>
<tr class="row-even"><td>KeepaliveTime</td>
<td>integer</td>
<td>Frequency of BGP Keepalive messages</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>AddPathsRx</td>
<td>boolean</td>
<td>Enable/Disable reception of BGP Add-Path NLRI updates</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>AddPathsMaxTx</td>
<td>integer</td>
<td>Max number of additional paths that can be transmitted to BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>PeerGroup</td>
<td>string</td>
<td>Peer group to inherit common configuration for BGP neighbors</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>BfdEnable</td>
<td>boolean</td>
<td>Enable/Disable BFD for BGP neigbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>BfdSessionParam</td>
<td>string</td>
<td>BFD session parameter profile name to be utilized by BFD session</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>MaxPrefixes</td>
<td>integer</td>
<td>Maximum number of prefixes that can be received from the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesThresholdPct</td>
<td>string</td>
<td>The percentage of MaxPrefixes before we start logging</td>
<td>no</td>
<td>80%</td>
</tr>
<tr class="row-even"><td>MaxPrefixesDisconnect</td>
<td>boolean</td>
<td>Disconnect the BGP peer session when we receive the max prefixes from the neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesRestartTimer</td>
<td>string</td>
<td>Time in seconds to wait before we start BGP peer session when we receive max prefixes</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UpdateSource</td>
<td>string</td>
<td>Interface to source BGP session.  Utilizes Egress interface IP with this is not present</td>
<td>no</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Here we will configure a BGP session between two devices running FlexSwitch and check the status of these devices.</p>
<p>Currently we are keeping track of BGP session FSM states based on a numeric value:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>BGP FSM state</td>
<td>Numeric value</td>
</tr>
<tr class="row-even"><td>Idle</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>Active</td>
<td>2</td>
</tr>
<tr class="row-even"><td>Connect</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>OpenSent</td>
<td>4</td>
</tr>
<tr class="row-even"><td>OpenConfirm</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>Established</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Below we will demonstrate how to create a BGP neighbor relationship between two BGP peers, Device1(10.1.10.241) and Device2(10.1.10.243) in AS 65535.  Display the BGP sessions status on each device and that they are exchanging a connected route from interface Vlan10.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is assuming each device has BGP enabled and are in AS 65535 and redistribution of connected routes has been enabled for Vlan10.</p>
</div>
<p>See Topology1 for details:</p>
<p>Topology 1:</p>
<img alt="_images/BGP_Diagram1.png" src="_images/BGP_Diagram1.png" />
<ol class="arabic">
<li><p class="first">On device1 (10.1.10.241), we will create a neighbor 1.1.1.1 from IPv4 1.1.1.0</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;PeerAS&quot;:65535,&quot;NeighborAddress&quot;:&quot;1.1.1.1&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPNeighbor&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;b72d2e52-8878-490e-5ee8-6873bd40f423&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">On device2 (10.1.10.243), we will create a neighbor to 1.1.1.0 from IPv4 1.1.1.1</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;PeerAS&quot;:65535,&quot;NeighborAddress&quot;:&quot;1.1.1.0&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPNeighbor&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;5977ffa7-67bd-4847-7597-4175b513883c&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can run RestAPI calls from any location that has IP connectivity to FlexSwitch.</p>
</div>
<ol class="arabic simple" start="3">
<li>Validation:</li>
</ol>
<p>Below it can be seen that both  Device1 and Device2 are in the Established state (Session State 6), and are exchanging routing information for the prefix on Vlan10.</p>
<p>On Device1 (10.1.10.241):</p>
<p>Neighbor 1.1.1.1 in the Established state (Session State 6), and is receiving a single prefix from this peer.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span>  <span class="s1">&#39;http://10.1.10.241:8080/public/v1/state/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">2999</span>    <span class="mi">0</span>  <span class="mi">2999</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">414</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">488</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdNeighborState&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;Messages&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Received&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">4</span>
                                        <span class="p">},</span>
                                        <span class="s2">&quot;Sent&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">7</span>
                                        <span class="p">}</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerType&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;Queues&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Input&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s2">&quot;Output&quot;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">&lt;---------</span><span class="n">Session</span> <span class="ow">is</span> <span class="n">Established</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&lt;--------</span><span class="n">Received</span> <span class="mi">1</span> <span class="n">Prefix</span>
                                <span class="s2">&quot;UpdateSource&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                        <span class="p">},</span>
        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;b72d2e52-8878-490e-5ee8-6873bd40f423&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>BGP Routes:</p>
<p>Device1 is receiving 10.10.0.0/24 with next hop of 1.1.1.1, which is the IP address on fpPort47 on Device2 and the redistributed route 10.10.1.0/24 in the BGP table from Vlan10:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span>  <span class="s1">&#39;http://10.1.10.241:8080/public/v1/state/BGPRoutes&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">5005</span>    <span class="mi">0</span>  <span class="mi">5005</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">489</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">543</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>

                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;CIDRLen&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;LocalPref&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Metric&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Network&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;PathId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedDuration&quot;</span><span class="p">:</span> <span class="s2">&quot;21m15.486384069s&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-11 12:36:32.932082062 -0700 PDT&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;CIDRLen&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;LocalPref&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Metric&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Network&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.0.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;65535&quot;</span><span class="p">,</span>
                <span class="p">],</span>
                                <span class="s2">&quot;PathId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedDuration&quot;</span><span class="p">:</span> <span class="s2">&quot;11m15.485818198s&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-11 12:46:02.932650633 -0700 PDT&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On Device2 (10.1.10.243):</p>
<p>Neighbor 1.1.1.0 in the Established state (Session State 6), and is receiving a single prefix from this peer.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span>  <span class="s1">&#39;http://10.1.10.243:8080/public/v1/state/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">2270</span>    <span class="mi">0</span>  <span class="mi">2270</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">227</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">246</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdNeighborState&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;Messages&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Received&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">9</span>
                                        <span class="p">},</span>
                                        <span class="s2">&quot;Sent&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">6</span>
                                        <span class="p">}</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerType&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;Queues&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Input&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s2">&quot;Output&quot;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">&lt;---------</span><span class="n">Session</span> <span class="ow">is</span> <span class="n">Established</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&lt;--------</span><span class="n">Received</span> <span class="mi">1</span> <span class="n">Prefix</span>
                                <span class="s2">&quot;UpdateSource&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;5977ffa7-67bd-4847-7597-4175b513883c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>BGP Routes:</p>
<p>Device2 is receiving 10.10.1.0/24 with next hop of 1.1.1.0, which is the IP address on fpPort47 on Device1 and the redistributed route 10.10.0.0/24 in the BGP table from Vlan10:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span>  <span class="s1">&#39;http://10.1.10.243:8080/public/v1/state/BGPRoutes&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">3442</span>    <span class="mi">0</span>  <span class="mi">3442</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">411</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">480</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;CIDRLen&quot;</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;LocalPref&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Metric&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Network&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.0.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;PathId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedDuration&quot;</span><span class="p">:</span> <span class="s2">&quot;21m14.232453255s&quot;</span><span class="p">,</span><span class="s2">&quot;,</span>
                                <span class="s2">&quot;UpdatedTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-11 12:36:31.432218651 -0700 PDT&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;CIDRLen&quot;</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;LocalPref&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Metric&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Network&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="p">[</span>
                                        <span class="s2">&quot;65535&quot;</span><span class="p">,</span>
                                <span class="p">],</span>
                                <span class="s2">&quot;PathId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedDuration&quot;</span><span class="p">:</span> <span class="s2">&quot;11m14.223927853s&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;UpdatedTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-11 12:46:02.55002553 -0700 PDT&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="bgp-neighbor-python">
<span id="id18"></span><h4>1.3.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#bgp-neighbor-python" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*IP address*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span> <span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPNeighbor</span><span class="p">(</span><span class="n">PeerAS</span><span class="o">=&lt;*</span><span class="n">Peer</span> <span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span>
<span class="go">                                                                LocalAS=&lt;*Local AS number*&gt;,</span>
<span class="go">                                                                AuthPassword=&lt;*Password*&gt;,</span>
<span class="go">                                                                Description=&lt;*Peer Description*&gt;,</span>
<span class="go">                                                                NeighborAddress=&lt;*IPv4 Address*&gt;,</span>
<span class="go">                                                                IfIndex=&lt;*Interface IfIndex*&gt;,</span>
<span class="go">                                                                RouteReflectorClusterId=&lt;*ClusterID*&gt;,</span>
<span class="go">                                                                RouteReflectorClient=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MultiHopEnable=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MultiHopTTL=&lt;*TTL*&gt;,</span>
<span class="go">                                                                ConnectRetryTime=&lt;*Retry Timer*&gt;,</span>
<span class="go">                                                                HoldTime=&lt;*Hold down Timer*&gt;,</span>
<span class="go">                                                                KeepAliveTime=&lt;*Keepalive Timer*&gt;,</span>
<span class="go">                                                                AddPathRx=&lt;*true/false*&gt;,</span>
<span class="go">                                                                AddPathsMaxTx=&lt;*Max Transmit AddPaths*&gt;,</span>
<span class="go">                                                                PeerGroup=&lt;*Peer Group Name*&gt;,</span>
<span class="go">                                                                BfdEnable=&lt;*true/false*&gt;,</span>
<span class="go">                                                                BfdSessionParam=&lt;*Bfd session param profile*&gt;,</span>
<span class="go">                                                                MaxPrefixes=&lt;*number of prefix&#39;s*&gt;,</span>
<span class="go">                                                                MaxPrefixesThresholdPct=&lt;*Percentage of Prefix&#39;s*&gt;,</span>
<span class="go">                                                                MaxPrefixesDisconnect=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MaxPrefixesRestartTimer=&lt;*Restart Timer*&gt;,)</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="15%" />
<col width="7%" />
<col width="53%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="23">createBGPNeighbor</td>
<td>PeerAS</td>
<td>integer</td>
<td>Peer AS of the BGP neighbor</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>LocalAS</td>
<td>integer</td>
<td>Local AS of the BGP, overrides Global AS value, can be used to spoof AS number</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>AuthPassword</td>
<td>string</td>
<td>Password to connect to the BGP neighbor</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>string</td>
<td>Description of the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>NeighborAddress</td>
<td>string</td>
<td>Address of the BGP neighbor (required if IfIndex is not supplied)</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>IfIndex</td>
<td>integer</td>
<td>Interface of BGP neighbor (required if NeighborAddress is not supplied)</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr class="row-even"><td>RouteReflectorClusterId</td>
<td>integer</td>
<td>Cluster ID of the internal BGP neighbor router reflector client</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>RouteReflectorClient</td>
<td>boolean</td>
<td>Set/Clear BGP neighbor as a route reflector client</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MultiHopEnable</td>
<td>boolean</td>
<td>Enable/Disable multihop for BGP neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MultiHopTTL</td>
<td>string</td>
<td>Number of hops(TTL) to multi-hop BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ConnectRetryTime</td>
<td>integer</td>
<td>Retry timer for BGP session reconnect attempt after disconnect/failure</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>HoldTime</td>
<td>integer</td>
<td>Hold down time for BGP neighbor failure/disconnect</td>
<td>no</td>
<td>180s</td>
</tr>
<tr class="row-even"><td>KeepaliveTime</td>
<td>integer</td>
<td>Frequency of BGP Keepalive messages</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>AddPathsRx</td>
<td>boolean</td>
<td>Enable/Disable reception of BGP Add-Path NLRI updates</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>AddPathsMaxTx</td>
<td>integer</td>
<td>Max number of additional paths that can be transmitted to BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>PeerGroup</td>
<td>string</td>
<td>Peer group to inherit common configuration for BGP neighbors</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>BfdEnable</td>
<td>boolean</td>
<td>Enable/Disable BFD for BGP neigbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>BfdSessionParam</td>
<td>string</td>
<td>BFD session parameter profile name to be utilized by BFD session</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>MaxPrefixes</td>
<td>integer</td>
<td>Maximum number of prefixes that can be received from the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesThresholdPct</td>
<td>string</td>
<td>The percentage of MaxPrefixes before we start logging</td>
<td>no</td>
<td>80%</td>
</tr>
<tr class="row-even"><td>MaxPrefixesDisconnect</td>
<td>boolean</td>
<td>Disconnect the BGP peer session when we receive the max prefixes from the neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesRestartTimer</td>
<td>string</td>
<td>Time in seconds to wait before we start BGP peer session when we receive max prefixes</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UpdateSource</td>
<td>string</td>
<td>Interface to source BGP session.  Utilizes Egress interface IP with this is not present</td>
<td>no</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Here we will configure a BGP session between two devices running FlexSwitch and check the status of these devices.</p>
<p>Currently we are keeping track of BGP session FSM states based on a numeric value:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>BGP FSM state</td>
<td>Numeric value</td>
</tr>
<tr class="row-even"><td>Idle</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>Active</td>
<td>2</td>
</tr>
<tr class="row-even"><td>Connect</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>OpenSent</td>
<td>4</td>
</tr>
<tr class="row-even"><td>OpenConfirm</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>Established</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Below we will demonstrate how to create a BGP neighbor relationship between two BGP peers, Device1(10.1.10.241) and Device2(10.1.10.243) in AS 65535.  Display the BGP sessions status on each device and that they are exchanging a connected route from interface Vlan10.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is assuming each device has BGP enabled and are in AS 65535 and redistribution of connected routes has been enabled for Vlan10.</p>
</div>
<p>See Topology1 for details:</p>
<img alt="_images/BGP_Diagram1.png" src="_images/BGP_Diagram1.png" />
<ol class="arabic">
<li><p class="first">On device1 (10.1.10.241), we will create a neighbor to 1.1.1.1 from IPv4 1.1.1.0</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPNeighbor</span><span class="p">(</span><span class="n">PeerAS</span><span class="o">=</span><span class="mi">65535</span> <span class="p">,</span> <span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span> <span class="n">IfIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;a34dde27-eea0-40ee-43f0-2836376accb7&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>On device2 (10.1.10.243), we will create a neighbor to 1.1.1.0 from IPv4 1.1.1.1</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPNeighbor</span><span class="p">(</span><span class="n">PeerAS</span><span class="o">=</span><span class="mi">65535</span> <span class="p">,</span> <span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span> <span class="n">IfIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;28fb7889-ee13-4ee8-4d4b-784d8121f707&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can run Python SDK methods from any location that has IP connectivity to FlexSwitch.</p>
</div>
<ol class="arabic simple" start="3">
<li>Validation:</li>
</ol>
<p>Below it can be seen that both Device1 and Device2 are in the Established state (Session State 6), and are exchanging routing information for the prefix on Vlan10.</p>
<p>On Device1 (10.1.10.241):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighborStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;BfdNeighborState&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;LocalAS&quot;: 65535,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;PeerType&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;TotalPrefixes&quot;: 1, &lt;-------Received 1 Prefix</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;SessionState&quot;: 6, &lt;-------Session is Established</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;ConfigObj&quot;: null,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;Queues&quot;: {</span>
<span class="go">                                &quot;Input&quot;: 0,</span>
<span class="go">                                &quot;Output&quot;: 0</span>
<span class="go">                        },</span>
<span class="go">                        &quot;Messages&quot;: {</span>
<span class="go">                                &quot;Received&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 0</span>
<span class="go">                                },</span>
<span class="go">                                &quot;Sent&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 0</span>
<span class="go">                                }</span>
<span class="go">                        },</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.0&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot;&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;358c6e8c-0b25-45b3-6f9c-2adef0d9b48c&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>BGP Routes:</p>
<p>Device1 is receiving 10.10.0.0/24 with next hop of 1.1.1.1, which is the IP address on fpPort47 on Device2 and the redistributed route 10.10.1.0/24 in the BGP table from Vlan10:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPRouteStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;CIDRLen&quot;: 24,</span>
<span class="go">                        &quot;ConfigObj&quot;: null,</span>
<span class="go">                        &quot;LocalPref&quot;: 0,</span>
<span class="go">                        &quot;Metric&quot;: 0,</span>
<span class="go">                        &quot;Network&quot;: &quot;10.10.1.0&quot;,</span>
<span class="go">                        &quot;NextHop&quot;: &quot;0.0.0.0&quot;,</span>
<span class="go">                        &quot;Path&quot;: null,</span>
<span class="go">                        &quot;PathId&quot;: 0,</span>
<span class="go">                        &quot;UpdatedDuration&quot;: &quot;21m15.486384069s&quot;,</span>
<span class="go">                        &quot;UpdatedTime&quot;: &quot;2016-05-11 12:36:32.932082062 -0700 PDT&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;CIDRLen&quot;: 24,</span>
<span class="go">                        &quot;ConfigObj&quot;: null,</span>
<span class="go">                        &quot;LocalPref&quot;: 0,</span>
<span class="go">                        &quot;Metric&quot;: 0,</span>
<span class="go">                        &quot;Network&quot;: &quot;10.10.2.0&quot;,</span>
<span class="go">                        &quot;NextHop&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                        &quot;Path&quot;: [</span>
<span class="go">                                &quot;65535&quot;,</span>
<span class="go">                        ],</span>
<span class="go">                        &quot;PathId&quot;: 0,</span>
<span class="go">                        &quot;UpdatedDuration&quot;: &quot;11m15.485818198s&quot;,</span>
<span class="go">                        &quot;UpdatedTime&quot;: &quot;2016-05-11 12:46:02.932650633 -0700 PDT&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>On Device2 (10.1.10.243):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighborStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;BfdNeighborState&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;LocalAS&quot;: 65535,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;PeerType&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;TotalPrefixes&quot;: 1, &lt;-------Received 1 Prefix</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;SessionState&quot;: 6, &lt;-------Session is Established</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;ConfigObj&quot;: null,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;Queues&quot;: {</span>
<span class="go">                                &quot;Input&quot;: 0,</span>
<span class="go">                                &quot;Output&quot;: 0</span>
<span class="go">                        },</span>
<span class="go">                        &quot;Messages&quot;: {</span>
<span class="go">                                &quot;Received&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 0</span>
<span class="go">                                },</span>
<span class="go">                                &quot;Sent&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 0</span>
<span class="go">                                }</span>
<span class="go">                        },</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot;&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;28fb7889-ee13-4ee8-4d4b-784d8121f707&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>BGP Routes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPRouteStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">        &quot;CIDRLen&quot;: 26,</span>
<span class="go">        &quot;ConfigObj&quot;: null,</span>
<span class="go">        &quot;LocalPref&quot;: 0,</span>
<span class="go">        &quot;Metric&quot;: 0,</span>
<span class="go">        &quot;Network&quot;: &quot;10.10.1.0&quot;,</span>
<span class="go">        &quot;NextHop&quot;: &quot;0.0.0.0&quot;,</span>
<span class="go">        &quot;Path&quot;: null,</span>
<span class="go">        &quot;PathId&quot;: 0,</span>
<span class="go">        &quot;UpdatedDuration&quot;: &quot;21m14.232453255s&quot;,&quot;,</span>
<span class="go">        &quot;UpdatedTime&quot;: &quot;2016-05-11 12:36:31.432218651 -0700 PDT&quot;</span>
<span class="go">    },</span>
<span class="go">    &quot;ObjectId&quot;: &quot;&quot;</span>
<span class="go">},</span>
<span class="go">{</span>
<span class="go">    &quot;Object&quot;: {</span>
<span class="go">        &quot;CIDRLen&quot;: 26,</span>
<span class="go">        &quot;ConfigObj&quot;: null,</span>
<span class="go">        &quot;LocalPref&quot;: 0,</span>
<span class="go">        &quot;Metric&quot;: 0,</span>
<span class="go">        &quot;Network&quot;: &quot;10.10.0.0&quot;,</span>
<span class="go">        &quot;NextHop&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">        &quot;Path&quot;: [</span>
<span class="go">            &quot;65535&quot;,</span>
<span class="go">        ],</span>
<span class="go">        &quot;PathId&quot;: 0,</span>
<span class="go">        &quot;UpdatedDuration&quot;: &quot;11m14.223927853s&quot;,</span>
<span class="go">        &quot;UpdatedTime&quot;: &quot;2016-05-11 12:46:02.55002553 -0700 PDT&quot;</span>
<span class="go">    },</span>
<span class="go">    &quot;ObjectId&quot;: &quot;&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="peer-groups">
<h3>1.3.4&nbsp;&nbsp;&nbsp;Peer Groups<a class="headerlink" href="#peer-groups" title="Permalink to this headline">¶</a></h3>
<p>PeerGroups are utilized in order to apply common parameters to multiple BGP neighbors, such as Peer AS, Timers, and routing policies, etc.   The advantage is the ability to apply and adjust variables common to multiple neighbor as well as a reduction to the amount of overall configuration required.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Configuration applied directly to a neighbor takes precedence over configuration applied via a peer groups.  Configured peer group values, take precedence over default applied values on neighbor configuration.</p>
</div>
<div class="section" id="utilizing-peer-groups">
<h4>1.3.4.1&nbsp;&nbsp;&nbsp;Utilizing Peer Groups<a class="headerlink" href="#utilizing-peer-groups" title="Permalink to this headline">¶</a></h4>
<p>Below is example of creating a Peer Group and applying it to a neighbor.  We will set the BGP Hold Time, Keep Alive Time for multiple neighbors.</p>
<div class="section" id="id19">
<h5>1.3.4.1.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;PeerAS&quot;:&lt;*Peer AS Number*&gt;,&quot;AuthPassword&quot;:&lt;*Password*&gt;,&quot;Description&quot;:&lt;*Peer Description*&gt;,&quot;RouteReflectorClusterId&quot;:&lt;*ClusterID*&gt;,&quot;RouteReflectorClient&quot;:&lt;*true/false*&gt;,&quot;MultiHopEnable&quot;:&lt;*true/false*&gt;,&quot;MultiHopTTL&quot;:&lt;*TTL*&gt;, &quot;ConnectRetryTime&quot;:&lt;*Retry Timer*&gt;, &quot;HoldTime&quot;:&lt;*Hold down Timer*&gt;, &quot;KeepAliveTime&quot;:&lt;*Keepalive Timer*&gt;, &quot;AddPathRx&quot;:&lt;*true/false*&gt;, &quot;AddPathsMaxTx&quot;:&lt;*Max Transmit AddPaths*&gt;, &quot;MaxPrefixes&quot;&quot;:&lt;*number of prefix&#39;</span><span class="n">s</span><span class="o">*&gt;</span><span class="p">,</span> <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span><span class="o">&lt;*</span><span class="n">Percentage</span> <span class="n">of</span> <span class="n">Prefix</span><span class="s1">&#39;s*&gt;, &quot;MaxPrefixesDisconnect&quot;:&lt;*true/false*&gt;, &quot;MaxPrefixesRestartTimer&quot;:&lt;*Restart Timer*&gt;        }&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPNeighbor&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="8%" />
<col width="61%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the BGP peer group</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>PeerAS</td>
<td>integer</td>
<td>Peer AS of the BGP neighbor</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>AuthPassword</td>
<td>string</td>
<td>Password to connect to the BGP neighbor</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>string</td>
<td>Description of the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>RouteReflectorClusterId</td>
<td>integer</td>
<td>Cluster ID of the internal BGP neighbor router reflector client</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>RouteReflectorClient</td>
<td>boolean</td>
<td>Set/Clear BGP neighbor as a route reflector client</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MultiHopEnable</td>
<td>boolean</td>
<td>Enable/Disable multihop for BGP neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MultiHopTTL</td>
<td>string</td>
<td>Number of hops(TTL) to multi-hop BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ConnectRetryTime</td>
<td>integer</td>
<td>Retry timer for BGP session reconnect attempt after disconnect/failure</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>HoldTime</td>
<td>integer</td>
<td>Hold down time for BGP neighbor failure/disconnect</td>
<td>no</td>
<td>180s</td>
</tr>
<tr class="row-even"><td>KeepaliveTime</td>
<td>integer</td>
<td>Frequency of BGP Keepalive messages</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>AddPathsRx</td>
<td>boolean</td>
<td>Enable/Disable reception of BGP Add-Path NLRI updates</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>AddPathsMaxTx</td>
<td>integer</td>
<td>Max number of additional paths that can be transmitted to BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>MaxPrefixes</td>
<td>integer</td>
<td>Maximum number of prefixes that can be received from the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>MaxPrefixesThresholdPct</td>
<td>string</td>
<td>The percentage of MaxPrefixes before we start logging</td>
<td>no</td>
<td>80%</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesDisconnect</td>
<td>boolean</td>
<td>Disconnect the BGP peer session when we receive the max prefixes from the neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MaxPrefixesRestartTimer</td>
<td>string</td>
<td>Time in seconds to wait before we start BGP peer session when we receive max prefixes</td>
<td>no</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>The example provided will utilize the <em>Topology 1</em> seen below:</p>
<p>Topology 1:</p>
<img alt="_images/BGP_Diagram1.png" src="_images/BGP_Diagram1.png" />
<ol class="arabic">
<li><dl class="first docutils">
<dt>On device1 (10.1.10.241), where I will create Peer Group <em>Group1</em>, setting the Keep Alive Time, Hold Time and Connect Retry Time.</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;KeepaliveTime&quot;:30, &quot;HoldTime&quot;:90, &quot;ConnectRetryTime&quot;:30 ,  &quot;Name&quot;:&quot;Group1&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPPeerGroup&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;fb508ac1-9958-4922-7cfe-b41a48f9a72d&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first">On device2 (10.1.10.243), where I will create Peer Group <em>Group1</em>, setting the Keep Alive Time, Hold Time and Connect Retry Time.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;KeepaliveTime&quot;:30, &quot;HoldTime&quot;:90, &quot;ConnectRetryTime&quot;:30 ,  &quot;Name&quot;:&quot;Group1&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPPeerGroup&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;5977ffa7-67bd-4847-7597-4175b513883c&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Utilizing previously created Neighbors on Device1 to apply Peer Group <em>Group1</em></p>
<blockquote>
<div><ol class="loweralpha">
<li><p class="first">Existing neighbor configuration on Device1</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PeerGroup field is blank</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">612</span>  <span class="mi">100</span>   <span class="mi">612</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">43290</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">47076</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;BfdSessionParam&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;358c6e8c-0b25-45b3-6f9c-2adef0d9b48c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Peer Group Configuration:</p>
<blockquote>
<div><p>Below we can see the following timers have been set within the Peer Group:</p>
<blockquote>
<div><ul class="simple">
<li>KeepaliveTime = 30</li>
<li>ConnectRetryTime = 30</li>
<li>HoldTime = 90</li>
</ul>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPPeerGroups&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">966</span>  <span class="mi">100</span>   <span class="mi">966</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">302</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">471</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Group2&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;fb508ac1-9958-4922-7cfe-b41a48f9a72d&quot;</span>
                <span class="p">},</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Applying Peer Group</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;NeighborAddress&quot;:&quot;1.1.1.0&quot;, &quot;PeerGroup&quot;:&quot;Group1&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPNeighbor&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;358c6e8c-0b25-45b3-6f9c-2adef0d9b48c&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;None.&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Verification PeerGroup is applied to Neighbors</p>
<blockquote>
<div><p>We can see below in the configuration and state objects, that the &#8220;PeerGroup&#8221; field now has the value assigned to <em>Group1</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The timers specified in the Peer Group, <em>Group1</em>, have been updated to reflect the timers on the neighbor State Object.  The configuration object reflects the default configuration on the neighbor.  If these values were user configured, they would take precedence.</p>
</div>
<dl class="docutils">
<dt><strong>Config:</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/config/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">618</span>  <span class="mi">100</span>   <span class="mi">618</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">399</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">603</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;BfdSessionParam&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;Group1&quot;</span><span class="p">,</span> <span class="o">&lt;---------------</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;358c6e8c-0b25-45b3-6f9c-2adef0d9b48c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>State</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.241:8080/public/v1/state/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">765</span>  <span class="mi">100</span>   <span class="mi">765</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">269</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">373</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdNeighborState&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="o">&lt;---------------</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;Messages&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Received&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">3</span>
                                        <span class="p">},</span>
                                        <span class="s2">&quot;Sent&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">2</span>
                                        <span class="p">}</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;Group1&quot;</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;PeerType&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Queues&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Input&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s2">&quot;Output&quot;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;358c6e8c-0b25-45b3-6f9c-2adef0d9b48c&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Utilizing previously created Neighbors on Device2 to apply Peer Group <em>Group1</em></p>
<blockquote>
<div><ol class="loweralpha">
<li><p class="first">Existing neighbor configuration on Device2</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PeerGroup field is blank</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">612</span>  <span class="mi">100</span>   <span class="mi">612</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">43290</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">47076</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;BfdSessionParam&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="o">&lt;---------------</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;086b6651-474d-493a-4b3f-ee756435ac95&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Peer Group Configuration:</p>
<blockquote>
<div><p>Below we can see the following timers have been set within the Peer Group:</p>
<blockquote>
<div><ul class="simple">
<li>KeepaliveTime = 30</li>
<li>ConnectRetryTime = 30</li>
<li>HoldTime = 90</li>
</ul>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPPeerGroups&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">966</span>  <span class="mi">100</span>   <span class="mi">966</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">302</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">471</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Group2&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;5977ffa7-67bd-4847-7597-4175b513883c&quot;</span>
                <span class="p">},</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Applying Peer Group:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;NeighborAddress&quot;:&quot;1.1.1.1&quot;, &quot;PeerGroup&quot;:&quot;Group1&quot;}&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPNeighbor&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;086b6651-474d-493a-4b3f-ee756435ac95&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;None.&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Verification PeerGroup is applied:</p>
<blockquote>
<div><p>We can see below in the configuration and state objects, that the &#8220;PeerGroup&#8221; field now has the value assigned to <em>Group1</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The timers specified in the Peer Group, <em>Group1</em>, have been updated to reflect the timers on the neighbor State Object.  The configuration object reflects the default configuration on the neighbor.  If these values were user configured, they would take precedence.</p>
</div>
<dl class="docutils">
<dt><strong>Config:</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">618</span>  <span class="mi">100</span>   <span class="mi">618</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">399</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">603</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;BfdSessionParam&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;Group1&quot;</span><span class="p">,</span> <span class="o">&lt;------------------</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;086b6651-474d-493a-4b3f-ee756435ac95&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>State</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/state/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">765</span>  <span class="mi">100</span>   <span class="mi">765</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">269</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">373</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdNeighborState&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ConfigObj&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span><span class="o">&lt;---------------</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;Messages&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Received&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">3</span>
                                        <span class="p">},</span>
                                        <span class="s2">&quot;Sent&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">2</span>
                                        <span class="p">}</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;Group1&quot;</span><span class="p">,</span> <span class="o">&lt;------------------</span>
                                <span class="s2">&quot;PeerType&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Queues&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Input&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s2">&quot;Output&quot;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;086b6651-474d-493a-4b3f-ee756435ac95&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id20">
<h5>1.3.4.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*IP address*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span> <span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPPeerGroup</span><span class="p">(</span><span class="n">PeerAS</span><span class="o">=&lt;*</span><span class="n">Peer</span> <span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span>
<span class="go">                                                                AuthPassword=&lt;*Password*&gt;,</span>
<span class="go">                                                                Description=&lt;*Peer Description*&gt;,</span>
<span class="go">                                                                RouteReflectorClusterId=&lt;*ClusterID*&gt;,</span>
<span class="go">                                                                RouteReflectorClient=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MultiHopEnable=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MultiHopTTL=&lt;*TTL*&gt;,</span>
<span class="go">                                                                ConnectRetryTime=&lt;*Retry Timer*&gt;,</span>
<span class="go">                                                                HoldTime=&lt;*Hold down Timer*&gt;,</span>
<span class="go">                                                                KeepAliveTime=&lt;*Keepalive Timer*&gt;,</span>
<span class="go">                                                                AddPathRx=&lt;*true/false*&gt;,</span>
<span class="go">                                                                AddPathsMaxTx=&lt;*Max Transmit AddPaths*&gt;,</span>
<span class="go">                                                                MaxPrefixes=&lt;*number of prefix&#39;s*&gt;,</span>
<span class="go">                                                                MaxPrefixesThresholdPct=&lt;*Percentage of Prefix&#39;s*&gt;,</span>
<span class="go">                                                                MaxPrefixesDisconnect=&lt;*true/false*&gt;,</span>
<span class="go">                                                                MaxPrefixesRestartTimer=&lt;*Restart Timer*&gt;,)</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="15%" />
<col width="7%" />
<col width="53%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="17">createBGPPeerGroup</td>
<td>Name</td>
<td>string</td>
<td>Name of the BGP peer group</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>PeerAS</td>
<td>integer</td>
<td>Peer AS of the BGP neighbor</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>AuthPassword</td>
<td>string</td>
<td>Password to connect to the BGP neighbor</td>
<td>no</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>string</td>
<td>Description of the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>RouteReflectorClusterId</td>
<td>integer</td>
<td>Cluster ID of the internal BGP neighbor router reflector client</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>RouteReflectorClient</td>
<td>boolean</td>
<td>Set/Clear BGP neighbor as a route reflector client</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MultiHopEnable</td>
<td>boolean</td>
<td>Enable/Disable multihop for BGP neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>MultiHopTTL</td>
<td>string</td>
<td>Number of hops(TTL) to multi-hop BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ConnectRetryTime</td>
<td>integer</td>
<td>Retry timer for BGP session reconnect attempt after disconnect/failure</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>HoldTime</td>
<td>integer</td>
<td>Hold down time for BGP neighbor failure/disconnect</td>
<td>no</td>
<td>180s</td>
</tr>
<tr class="row-even"><td>KeepaliveTime</td>
<td>integer</td>
<td>Frequency of BGP Keepalive messages</td>
<td>no</td>
<td>60s</td>
</tr>
<tr class="row-odd"><td>AddPathsRx</td>
<td>boolean</td>
<td>Enable/Disable reception of BGP Add-Path NLRI updates</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>AddPathsMaxTx</td>
<td>integer</td>
<td>Max number of additional paths that can be transmitted to BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>MaxPrefixes</td>
<td>integer</td>
<td>Maximum number of prefixes that can be received from the BGP neighbor</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>MaxPrefixesThresholdPct</td>
<td>string</td>
<td>The percentage of MaxPrefixes before we start logging</td>
<td>no</td>
<td>80%</td>
</tr>
<tr class="row-odd"><td>MaxPrefixesDisconnect</td>
<td>boolean</td>
<td>Disconnect the BGP peer session when we receive the max prefixes from the neighbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>MaxPrefixesRestartTimer</td>
<td>string</td>
<td>Time in seconds to wait before we start BGP peer session when we receive max prefixes</td>
<td>no</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>The example provided will utilize the <em>Topology 1</em> seen below:</p>
<p>Topology 1:</p>
<img alt="_images/BGP_Diagram1.png" src="_images/BGP_Diagram1.png" />
<ol class="arabic">
<li><p class="first">On device1 (10.1.10.241), where I will create Peer Group <em>Group1</em>, setting the Keep Alive Time, Hold Time and Connect Retry Time.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPPeerGroup</span><span class="p">(</span><span class="n">KeepaliveTime</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">HoldTime</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">ConnectRetryTime</span><span class="o">=</span><span class="mi">30</span> <span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;Group1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;f91bc8e5-fcb7-461a-4c17-5298b19ab280&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">On device2 (10.1.10.243), where I will create Peer Group <em>Group1</em>, setting the Keep Alive Time, Hold Time and Connect Retry Time.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPPeerGroup</span><span class="p">(</span><span class="n">KeepaliveTime</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">HoldTime</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">ConnectRetryTime</span><span class="o">=</span><span class="mi">30</span> <span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;Group1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;5683eeac-8457-65bd-43f0-23642abf2e78&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Utilizing previously created neighbors on Device1 to apply Peer Group <em>Group1</em></p>
<blockquote>
<div><ol class="loweralpha">
<li><p class="first">Existing neighbor configuration on Device1</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PeerGroup field is blank</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighbors</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;BfdEnable&quot;: False,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot; &quot;,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.0&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;BfdSessionParam&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;fd88413e-b0b5-420b-5596-ea0bd2337064&quot;</span>
<span class="go">        },</span>
<span class="go">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Peer Group Configuration:</p>
<blockquote>
<div><p>Below we can see the following timers have been set within the Peer Group:</p>
<blockquote>
<div><ul class="simple">
<li>KeepaliveTime = 30</li>
<li>ConnectRetryTime = 30</li>
<li>HoldTime = 90</li>
</ul>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPPeerGroups</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 30,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot; &quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 30,</span>
<span class="go">                        &quot;HoldTime&quot;: 90,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 0,</span>
<span class="go">                        &quot;Name&quot;: &quot;Group1&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;f91bc8e5-fcb7-461a-4c17-5298b19ab280&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Applying Peer Group</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPNeighbor</span><span class="p">(</span><span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span> <span class="n">PeerGroup</span><span class="o">=</span><span class="s2">&quot;Group1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;fd88413e-b0b5-420b-5596-ea0bd2337064&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Verification PeerGroup is applied to Neighbors</p>
<blockquote>
<div><p>We can see below in the configuration and state objects, that the &#8220;PeerGroup&#8221; field now has the value assigned to <em>Group1</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The timers specified in the Peer Group, <em>Group1</em>, have been updated to reflect the timers on the neighbor State Object.  The configuration object reflects the default configuration on the neighbor.  If these values were user configured, they would take precedence.</p>
</div>
<dl class="docutils">
<dt><strong>Config:</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighbors</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;BfdEnable&quot;: false,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;Group1&quot;, &lt;---------------</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.0&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;BfdSessionParam&quot;: &quot;default&quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;fd88413e-b0b5-420b-5596-ea0bd2337064&quot;</span>
<span class="go">        },</span>
</pre></div>
</div>
</dd>
<dt><strong>State</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighborStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;BfdNeighborState&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 30, &lt;---------------</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;Group1&quot;, &lt;---------------</span>
<span class="go">                        &quot;PeerType&quot;: 1,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;TotalPrefixes&quot;: 8,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;SessionState&quot;: 6,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;Queues&quot;: {</span>
<span class="go">                                &quot;Input&quot;: 0,</span>
<span class="go">                                &quot;Output&quot;: 0</span>
<span class="go">                        },</span>
<span class="go">                        &quot;Messages&quot;: {</span>
<span class="go">                                &quot;Received&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 3</span>
<span class="go">                                },</span>
<span class="go">                                &quot;Sent&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 4</span>
<span class="go">                                }</span>
<span class="go">                        },</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.0&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;HoldTime&quot;: 90, &lt;---------------</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 30 &lt;---------------</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;fd88413e-b0b5-420b-5596-ea0bd2337064&quot;</span>
<span class="go">        },</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Utilizing previously created Neighbors on Device2 to apply Peer Group <em>Group1</em></p>
<blockquote>
<div><ol class="loweralpha">
<li><p class="first">Existing neighbor configuration on Device2</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PeerGroup field is blank</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighbors</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;BfdEnable&quot;: False,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot; &quot;,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;BfdSessionParam&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;aad53634-a7d2-2314-9974-dea42f3456ac&quot;</span>
<span class="go">        },</span>
<span class="go">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Peer Group Configuration:</p>
<blockquote>
<div><p>Below we can see the following timers have been set within the Peer Group:</p>
<blockquote>
<div><ul class="simple">
<li>KeepaliveTime = 30</li>
<li>ConnectRetryTime = 30</li>
<li>HoldTime = 90</li>
</ul>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPPeerGroups</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 30,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;UpdateSource&quot;: &quot; &quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 30,</span>
<span class="go">                        &quot;HoldTime&quot;: 90,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 0,</span>
<span class="go">                        &quot;Name&quot;: &quot;Group1&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;5683eeac-8457-65bd-43f0-23642abf2e78&quot;</span>
<span class="go">        }</span>
<span class="go">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Applying Peer Group</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.0.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPNeighbor</span><span class="p">(</span><span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;1.1.1.0&quot;</span><span class="p">,</span> <span class="n">PeerGroup</span><span class="o">=</span><span class="s2">&quot;Group1&quot;</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;aad53634-a7d2-2314-9974-dea42f3456ac&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Verification PeerGroup is applied to Neighbors</p>
<blockquote>
<div><p>We can see below in the configuration and state objects, that the &#8220;PeerGroup&#8221; field now has the value assigned to <em>Group1</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The timers specified in the Peer Group, <em>Group1</em>, have been updated to reflect the timers on the neighbor State Object.  The configuration object reflects the default configuration on the neighbor.  If these values were user configured, they would take precedence.</p>
</div>
<dl class="docutils">
<dt><strong>Config:</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.243&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighbors</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;BfdEnable&quot;: false,</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;Group1&quot;, &lt;---------------</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;HoldTime&quot;: 180,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;BfdSessionParam&quot;: &quot;default&quot;,</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;aad53634-a7d2-2314-9974-dea42f3456ac&quot;</span>
<span class="go">        },</span>
</pre></div>
</div>
</dd>
<dt><strong>State</strong></dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.241&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighborStates</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                        &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                        &quot;BfdNeighborState&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;LocalAS&quot;: 0,</span>
<span class="go">                        &quot;KeepaliveTime&quot;: 30, &lt;---------------</span>
<span class="go">                        &quot;AddPathsRx&quot;: false,</span>
<span class="go">                        &quot;PeerGroup&quot;: &quot;Group1&quot;, &lt;---------------</span>
<span class="go">                        &quot;PeerType&quot;: 1,</span>
<span class="go">                        &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                        &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;TotalPrefixes&quot;: 8,</span>
<span class="go">                        &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                        &quot;SessionState&quot;: 6,</span>
<span class="go">                        &quot;PeerAS&quot;: 65535,</span>
<span class="go">                        &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                        &quot;Queues&quot;: {</span>
<span class="go">                                &quot;Input&quot;: 0,</span>
<span class="go">                                &quot;Output&quot;: 0</span>
<span class="go">                        },</span>
<span class="go">                        &quot;Messages&quot;: {</span>
<span class="go">                                &quot;Received&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 3</span>
<span class="go">                                },</span>
<span class="go">                                &quot;Sent&quot;: {</span>
<span class="go">                                        &quot;Notification&quot;: 0,</span>
<span class="go">                                        &quot;Update&quot;: 4</span>
<span class="go">                                }</span>
<span class="go">                        },</span>
<span class="go">                        &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                        &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                        &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                        &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                        &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;IfIndex&quot;: 0,</span>
<span class="go">                        &quot;HoldTime&quot;: 90, &lt;---------------</span>
<span class="go">                        &quot;ConnectRetryTime&quot;: 30 &lt;---------------</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;aad53634-a7d2-2314-9974-dea42f3456ac&quot;</span>
<span class="go">        },</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="id21">
<h3>1.3.5&nbsp;&nbsp;&nbsp;Enabling BFD<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>To ensure fast fail-over of BGP sessions during times of failures, BFD can be enabled, to enabled to ensure sub-second failure detection.  This is done by enabling BFD for that neighbor and tying a BFD session profile per-neighbor relationship.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This configuration can be enabled via a Peer Group OR directly on the neighbor itself. See <a class="reference internal" href="#bgp-neighbor-rest"><span class="std std-ref">1.3.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</span></a> or <a class="reference internal" href="#bgp-neighbor-python"><span class="std std-ref">1.3.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</span></a> for more details.</p>
</div>
<div class="section" id="id22">
<h4>1.3.5.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND</strong></p>
<p>Update BGP neighbor:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;NeighborAddress&quot;:&quot;&lt;*IP Address*&gt;&quot;, &quot;BfdEnable&quot;:&quot;&lt;*enable/disable BFD*&gt;&quot;, &quot;BfdSessionParam&quot;:&quot;&lt;*BFD parameter profile*&gt;&quot;:}&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/config/BGPNeighbor&#39;</span>
</pre></div>
</div>
<p>Enabled on BGP neighbor Creation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;NeighborAddress&quot;:&quot;&lt;*IP Address*&gt;&quot;, &quot;BfdEnable&quot;:&quot;&lt;*enable/disable BFD*&gt;&quot;, &quot;BfdSessionParam&quot;:&quot;&lt;*BFD parameter profile*&gt;&quot;:}&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/config/BGPNeighbor&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This above example, is just a subset of the BGP Neighbor commands.  See <a class="reference internal" href="#bgp-neighbor-rest"><span class="std std-ref">1.3.3.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</span></a> for more details</p>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="8%" />
<col width="61%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NeighborAddress</td>
<td>string</td>
<td>Address of the BGP neighbor (required if IfIndex is not supplied)</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>BfdEnable</td>
<td>boolean</td>
<td>Enable/Disable BFD for BGP neigbor</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-even"><td>BfdSessionParam</td>
<td>string</td>
<td>BFD session parameter profile name to be utilized by BFD session</td>
<td>no</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>Below is an example of enabling BFD on a BGP neighbor:</p>
<ol class="arabic">
<li><p class="first">Create BFD Session Parameters</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;BFD_session&quot;,&quot;LocalMultiplier&quot;:3,&quot;DesiredMinTxInterval&quot;:250,&quot;RequiredMinRxInterval&quot;:250}&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/config/BfdSessionParam&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See Creating <a class="reference internal" href="#bfd-session-parameters-rest"><span class="std std-ref">1.2.3.1.2&nbsp;&nbsp;&nbsp;Creating BFD session parameters</span></a> section for more details.</p>
</div>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Attach BFD session parameters and enable BFD on exisiting neighbor</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;NeighborAddress&quot;:&quot;1.1.1.1&quot;, &quot;BfdEnable&quot;:&quot;true&quot;, &quot;BfdSessionParam&quot;:&quot;BFD_Session&quot;:}&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/config/BGPNeighbor&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;fcb3a338-1f10-4a18-56da-cc615516024f&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Assumes BFD is enabled on the far-end BGP neighbor</p>
</div>
</dd>
</dl>
</li>
<li><p class="first">Verify BFD is enabled, in the up state and registered with BGP neighbor:</p>
<blockquote>
<div><p>Below we can see that BFD is up and passing traffic.  The <em>NumRxPackets</em> and <em>NumTxPackets</em> counters show that we are sending and receiving BFD hello packets.
<em>RegisteredProtocols</em> is BGP, as well as the <em>SessionState</em> being in the <strong>up</strong> states.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/state/BfdSessions&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">1415</span>  <span class="mi">100</span>  <span class="mi">1415</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">233</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">276</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AuthSeqKnown&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthType&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;DemandMode&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;DesiredMinTxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;DetectionMultiplier&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                <span class="s2">&quot;IfName&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;InterfaceSpecific&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;IpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span><span class="o">&lt;--------------</span>
                                <span class="s2">&quot;LocalDiagType&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;LocalDiscriminator&quot;</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span>
                                <span class="s2">&quot;LocalMacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;NumRxPackets&quot;</span><span class="p">:</span> <span class="mi">228806</span><span class="p">,</span><span class="o">&lt;--------------</span>
                                <span class="s2">&quot;NumTxPackets&quot;</span><span class="p">:</span> <span class="mi">236795</span><span class="p">,</span><span class="o">&lt;--------------</span>
                                <span class="s2">&quot;ParamName&quot;</span><span class="p">:</span> <span class="s2">&quot;BFD_Session&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PerLinkSession&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;ReceivedAuthSeq&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;RegisteredProtocols&quot;</span><span class="p">:</span> <span class="s2">&quot;bgp, &quot;</span><span class="p">,</span><span class="o">&lt;--------------</span>
                                <span class="s2">&quot;RemoteDemandMode&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteDetectionMultiplier&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteDiscriminator&quot;</span><span class="p">:</span> <span class="mi">288</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteMacAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteMinRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RemoteSessionState&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;RequiredMinRxInterval&quot;</span><span class="p">:</span> <span class="s2">&quot;250000(us)&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;SentAuthSeq&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionId&quot;</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span><span class="o">&lt;--------------</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
</pre></div>
</div>
<p>For the associated BGP neighbor, we can see that the <em>BfdNeighborState</em> is UP and this BGP neighbor <em>SessionState</em> in Established (state 6) is up:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.245:8080/public/v1/state/BGPNeighbors&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">1547</span>  <span class="mi">100</span>  <span class="mi">1547</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">185</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">215</span><span class="n">k</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AddPathsMaxTx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;AddPathsRx&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;AuthPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;BfdNeighborState&quot;</span><span class="p">:</span> <span class="s2">&quot;up&quot;</span><span class="p">,</span> <span class="o">&lt;--------------</span>
                                <span class="s2">&quot;ConnectRetryTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;HoldTime&quot;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
                                <span class="s2">&quot;IfIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;KeepaliveTime&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                                <span class="s2">&quot;LocalAS&quot;</span><span class="p">:</span> <span class="mi">420000006</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesDisconnect&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesRestartTimer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;MaxPrefixesThresholdPct&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                <span class="s2">&quot;Messages&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Received&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">25</span>
                                        <span class="p">},</span>
                                        <span class="s2">&quot;Sent&quot;</span><span class="p">:</span> <span class="p">{</span>
                                                <span class="s2">&quot;Notification&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                                                <span class="s2">&quot;Update&quot;</span><span class="p">:</span> <span class="mi">27</span>
                                        <span class="p">}</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;MultiHopEnable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;MultiHopTTL&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;NeighborAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerAS&quot;</span><span class="p">:</span> <span class="mi">420000004</span><span class="p">,</span>
                                <span class="s2">&quot;PeerGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;Group1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;PeerType&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;Queues&quot;</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="s2">&quot;Input&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="s2">&quot;Output&quot;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">},</span>
                                <span class="s2">&quot;RouteReflectorClient&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                                <span class="s2">&quot;RouteReflectorClusterId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;SessionState&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span><span class="o">&lt;--------------</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                                <span class="s2">&quot;UpdateSource&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;fcb3a338-1f10-4a18-56da-cc615516024f&quot;</span>
                <span class="p">},</span>
        <span class="p">]</span>

<span class="n">In</span> <span class="n">the</span> <span class="n">BGP</span> <span class="n">neighbor</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">we</span> <span class="n">can</span> <span class="n">see</span> <span class="n">the</span> <span class="o">*</span><span class="n">BfdSessionParam</span><span class="o">*</span> <span class="n">tied</span> <span class="n">to</span> <span class="n">this</span> <span class="n">neighbor</span> <span class="ow">is</span> <span class="n">BFD_Session</span><span class="p">:</span>
        <span class="p">::</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id23">
<h4>1.3.5.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND</strong></p>
<p>Update BGP neighbor:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPNeighbor</span><span class="p">(</span><span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;&lt;*IP Address*&gt;&quot;</span><span class="p">,</span> <span class="n">IfIndex</span><span class="o">=&lt;*</span><span class="n">IfIndex</span><span class="o">*&gt;</span><span class="p">,</span> <span class="n">BfdSessionParam</span><span class="o">=</span><span class="s2">&quot;&lt;*BFD parameter profile*&gt;&quot;</span><span class="p">,</span> <span class="n">BfdEnable</span><span class="o">=&lt;*</span><span class="n">enable</span><span class="o">/</span><span class="n">disable</span> <span class="n">bfd</span><span class="o">*&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Enabled on BGP neighbor creation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPNeighbor</span><span class="p">(</span><span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;&lt;*IP Address*&gt;&quot;</span><span class="p">,</span> <span class="n">IfIndex</span><span class="o">=&lt;*</span><span class="n">IfIndex</span><span class="o">*&gt;</span><span class="p">,</span> <span class="n">BfdSessionParam</span><span class="o">=</span><span class="s2">&quot;&lt;*BFD parameter profile*&gt;&quot;</span><span class="p">,</span> <span class="n">BfdEnable</span><span class="o">=&lt;*</span><span class="n">enable</span><span class="o">/</span><span class="n">disable</span> <span class="n">bfd</span><span class="o">*&gt;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This above example, is just a subset of the BGP Neighbor commands.  See <a class="reference internal" href="#bgp-neighbor-python"><span class="std std-ref">1.3.3.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</span></a></p>
</div>
<p><strong>OPTIONS</strong></p>
<p><strong>EXAMPLE</strong></p>
<p>Below is an example of enabling BFD on an existing BGP neighbor:</p>
<ol class="arabic">
<li><p class="first">Create BFD Session Parameters</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createBfdSessionParam</span><span class="p">(</span><span class="n">Name</span><span class="o">=</span><span class="s2">&quot;BFD_Session&quot;</span><span class="p">,</span> <span class="n">RequiredMinRxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">DesiredMinTxInterval</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">LocalMultiplier</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">({u&#39;ObjectId&#39;: u&#39;a4963a6b-b8cc-4dc8-7693-cbf907a0af0f&#39;, u&#39;Error&#39;: u&#39;&#39;}, None)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See Creating <a class="reference internal" href="#bfd-session-parameters-python"><span class="std std-ref">1.2.3.2.2&nbsp;&nbsp;&nbsp;Creating BFD session parameters</span></a> section for more details.</p>
</div>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Attach BFD session parameters and enable BFD on exisiting neighbor</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPNeighbor</span><span class="p">(</span><span class="n">NeighborAddress</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span> <span class="n">IfIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">BfdSessionParam</span><span class="o">=</span><span class="s2">&quot;BFD_Session&quot;</span><span class="p">,</span> <span class="n">BfdEnable</span><span class="o">=</span><span class="s2">&quot;True&quot;</span><span class="p">)</span>
<span class="p">({</span><span class="s1">u&#39;ObjectId&#39;</span><span class="p">:</span> <span class="s1">u&#39;3861ec9a-188f-44f2-4e49-db60267c600b&#39;</span><span class="p">,</span> <span class="s1">u&#39;Error&#39;</span><span class="p">:</span> <span class="s1">u&#39;None.&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Assumes BFD is enabled on the far-end BGP neighbor</p>
</div>
</dd>
</dl>
</li>
<li><p class="first">Verify BFD is enabled, in the up state and registered with BGP neighbor:</p>
<blockquote>
<div><p>Below we can see that BFD is up and passing traffic.  The <em>NumRxPackets</em> and <em>NumTxPackets</em> counters show that we are sending and receiving BFD hello packets.
<em>RegisteredProtocols</em> is BGP, as well as the <em>SessionState</em> being in the <strong>up</strong> states.</p>
<dl class="docutils">
<dt>::</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBfdSessionStates</span><span class="p">(),</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">        {</span>
<span class="go">                &quot;Object&quot;: {</span>
<span class="go">                        &quot;RegisteredProtocols&quot;: &quot;bgp, &quot;,  &lt;-------------</span>
<span class="go">                        &quot;DesiredMinTxInterval&quot;: &quot;250000(us)&quot;,</span>
<span class="go">                        &quot;SessionId&quot;: 701,</span>
<span class="go">                        &quot;ParamName&quot;: &quot;BFD_Session&quot;, &lt;-------------</span>
<span class="go">                        &quot;DemandMode&quot;: false,</span>
<span class="go">                        &quot;DetectionMultiplier&quot;: 3,</span>
<span class="go">                        &quot;SentAuthSeq&quot;: 0,</span>
<span class="go">                        &quot;LocalDiscriminator&quot;: 701,</span>
<span class="go">                        &quot;SessionState&quot;: &quot;up&quot;, &lt;-------------</span>
<span class="go">                        &quot;AuthSeqKnown&quot;: false,</span>
<span class="go">                        &quot;PerLinkSession&quot;: false,</span>
<span class="go">                        &quot;IfName&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;ConfigObj&quot;: null,</span>
<span class="go">                        &quot;RequiredMinRxInterval&quot;: &quot;250000(us)&quot;,</span>
<span class="go">                        &quot;AuthType&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RemoteDiscriminator&quot;: 1090519237,</span>
<span class="go">                        &quot;RemoteSessionState&quot;: &quot;up&quot;,</span>
<span class="go">                        &quot;NumTxPackets&quot;: 747461, &lt;-------------</span>
<span class="go">                        &quot;InterfaceSpecific&quot;: false,</span>
<span class="go">                        &quot;NumRxPackets&quot;: 908113, &lt;-------------</span>
<span class="go">                        &quot;RemoteDemandMode&quot;: false,</span>
<span class="go">                        &quot;LocalMacAddr&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;RemoteMinRxInterval&quot;: &quot;250000(us)&quot;,</span>
<span class="go">                        &quot;IpAddr&quot;: &quot;1.1.1.1&quot;, &lt;-------------</span>
<span class="go">                        &quot;RemoteMacAddr&quot;: &quot;&quot;,</span>
<span class="go">                        &quot;LocalDiagType&quot;: &quot;None&quot;,</span>
<span class="go">                        &quot;IfIndex&quot;: 47,</span>
<span class="go">                        &quot;ReceivedAuthSeq&quot;: 0</span>
<span class="go">                },</span>
<span class="go">                &quot;ObjectId&quot;: &quot;&quot;</span>
<span class="go">        },</span>
<span class="go">]</span>
</pre></div>
</div>
</dd>
</dl>
<p>For the associated BGP neighbor, we can see that the <em>BfdNeighborState</em> is UP and this BGP neighbor <em>SessionState</em> in Established (state 6) is up:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">getAllBGPNeighborStates</span><span class="p">(),</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">          {</span>
<span class="go">                        &quot;Object&quot;: {</span>
<span class="go">                                &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                                &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                                &quot;BfdNeighborState&quot;: &quot;up&quot;, &lt;--------------</span>
<span class="go">                                &quot;LocalAS&quot;: 420000006,</span>
<span class="go">                                &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                                &quot;AddPathsRx&quot;: false,</span>
<span class="go">                                &quot;UpdateSource&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;PeerGroup&quot;: &quot;Group1&quot;,</span>
<span class="go">                                &quot;PeerType&quot;: 0,</span>
<span class="go">                                &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                                &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;TotalPrefixes&quot;: 0,</span>
<span class="go">                                &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                                &quot;SessionState&quot;: 6, &lt;--------------</span>
<span class="go">                                &quot;PeerAS&quot;: 420000005,</span>
<span class="go">                                &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                                &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                                &quot;Queues&quot;: {</span>
<span class="go">                                        &quot;Input&quot;: 0,</span>
<span class="go">                                        &quot;Output&quot;: 0</span>
<span class="go">                                },</span>
<span class="go">                                &quot;Messages&quot;: {</span>
<span class="go">                                        &quot;Received&quot;: {</span>
<span class="go">                                                &quot;Notification&quot;: 0,</span>
<span class="go">                                                &quot;Update&quot;: 5</span>
<span class="go">                                        },</span>
<span class="go">                                        &quot;Sent&quot;: {</span>
<span class="go">                                                &quot;Notification&quot;: 0,</span>
<span class="go">                                                &quot;Update&quot;: 5</span>
<span class="go">                                        }</span>
<span class="go">                                },</span>
<span class="go">                                &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                                &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                                &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                                &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                                &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;IfIndex&quot;: 0,</span>
<span class="go">                                &quot;HoldTime&quot;: 180,</span>
<span class="go">                                &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                        },</span>
<span class="go">                        &quot;ObjectId&quot;: &quot;3861ec9a-188f-44f2-4e49-db60267c600b&quot;</span>
<span class="go">                }</span>
<span class="go">        ]</span>

<span class="go">In the BGP neighbor configuration, we can see the *BfdSessionParam* tied to this neighbor is BFD_Session:</span>
<span class="go">::</span>

<span class="go">        [</span>
<span class="go">                {</span>
<span class="go">                        &quot;Object&quot;: {</span>
<span class="go">                                &quot;BfdEnable&quot;: true,</span>
<span class="go">                                &quot;RouteReflectorClient&quot;: false,</span>
<span class="go">                                &quot;MultiHopTTL&quot;: 0,</span>
<span class="go">                                &quot;LocalAS&quot;: 420000006,</span>
<span class="go">                                &quot;KeepaliveTime&quot;: 60,</span>
<span class="go">                                &quot;AddPathsRx&quot;: false,</span>
<span class="go">                                &quot;UpdateSource&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;PeerGroup&quot;: &quot;Group1&quot;,</span>
<span class="go">                                &quot;MaxPrefixesRestartTimer&quot;: 0,</span>
<span class="go">                                &quot;Description&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;MultiHopEnable&quot;: false,</span>
<span class="go">                                &quot;AuthPassword&quot;: &quot;&quot;,</span>
<span class="go">                                &quot;RouteReflectorClusterId&quot;: 0,</span>
<span class="go">                                &quot;MaxPrefixesDisconnect&quot;: false,</span>
<span class="go">                                &quot;PeerAS&quot;: 420000005,</span>
<span class="go">                                &quot;AddPathsMaxTx&quot;: 0,</span>
<span class="go">                                &quot;NeighborAddress&quot;: &quot;1.1.1.1&quot;,</span>
<span class="go">                                &quot;MaxPrefixes&quot;: 0,</span>
<span class="go">                                &quot;MaxPrefixesThresholdPct&quot;: 80,</span>
<span class="go">                                &quot;HoldTime&quot;: 180,</span>
<span class="go">                                &quot;IfIndex&quot;: 0,</span>
<span class="go">                                &quot;BfdSessionParam&quot;: &quot;BFD_Session&quot;, &lt;--------------</span>
<span class="go">                                &quot;ConnectRetryTime&quot;: 60</span>
<span class="go">                        },</span>
<span class="go">                        &quot;ObjectId&quot;: &quot;3861ec9a-188f-44f2-4e49-db60267c600b&quot;</span>
<span class="go">                }</span>
<span class="go">        ]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>
<div class="section" id="enabling-multipath">
<h3>1.3.6&nbsp;&nbsp;&nbsp;Enabling MultiPath<a class="headerlink" href="#enabling-multipath" title="Permalink to this headline">¶</a></h3>
<p>In order for BGP to be configured for Equal Cost Multi Path, or ECMP you must to enable BGP multipath.  This allows the BGP daemon to enable selection of routes that are deemed equal cost via the BGP path selection algorithm, as specified in RFC 4271.</p>
<p>Once Multipath is enabled only the following path variables need to be equal:</p>
<blockquote>
<div><ul class="simple">
<li>Weight</li>
<li>Local-Preference</li>
<li>AS-PATH Length</li>
<li>Origin</li>
</ul>
</div></blockquote>
<p>Keep in mind, that with BGP multipath enabled ONLY the selected best path for that prefix is advertised to neighbors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When utilizing BGP add-path, each add-path NLRI is considered separately for BGP Path Selection algorithm as if they are separate prefixes.  This means that ECMP/Multipath is considered differently for each add-path NLRI.  Each add-path NLRI is advertised to add-path neighbors, even if prefix is the same.  For non add-path neighbors only the best BGP path is advertised.</p>
</div>
<p>Multi-path is enabled in the BGP Global object and can be enabled for IBGP routes and  EBGP routes separately.   FlexSwitch supports up to 32-way ECMP for BGP.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">EBGP and IBGP routes will only be compared for ECMP, if both are enabled.</p>
</div>
<div class="section" id="id24">
<h4>1.3.6.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND</strong></p>
<p>Update BGP global</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:&lt;*AS Number*&gt;,&quot;RouterId&quot;:&quot;&lt;*IP Addr*&gt;&quot;,&quot;UseMultiplePaths&quot;:&lt;*true/false*&gt;,&quot;EBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;,&quot;IBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPGlobal&#39;</span>
</pre></div>
</div>
<p>On BGP global creation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:&lt;*AS Number*&gt;,&quot;RouterId&quot;:&quot;&lt;*IP Addr*&gt;&quot;,&quot;UseMultiplePaths&quot;:&lt;*true/false*&gt;,&quot;EBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;,&quot;IBGPMaxPaths&quot;:&lt;*Number of Paths*&gt;}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPGlobal&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is a variable being enabled part of BGPGlobal object. See <a class="reference internal" href="#bgp-global-rest"><span class="std std-ref">1.3.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</span></a> for more details.</p>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UseMultiplePaths</td>
<td>boolean</td>
<td>Enable/disable ECMP for BGP</td>
<td>no</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>EBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from External BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>IBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from Internal BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>Below is an example on how to enable BGP multipath for both IBGP and EBGP routes:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Configure Max Paths to desired paths for EBGP and IBGP and enable multipath:</dt>
<dd><ol class="first loweralpha simple">
<li>In this example <em>EBGPMaxPaths</em> and <em>IBGPMaxPaths</em> are set to 32</li>
<li>Updating <em>UseMultiplePaths</em> to true to enable multipath</li>
</ol>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:65535,&quot;RouterId&quot;:&quot;1.1.1.1&quot;,&quot;UseMultiplePaths&quot;:true,&quot;EBGPMaxPaths&quot;:32,&quot;IBGPMaxPaths&quot;:32}&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPGlobal&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;7f2c589d-3dea-4356-75be-91c7c2de18cb&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first">Validate in configuration and state objects that BGP Multipath is enabled:</p>
<blockquote>
<div><p><strong>Configuration:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPGlobals&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">344</span>  <span class="mi">100</span>   <span class="mi">344</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">62228</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">68800</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;ASNum&quot;</span><span class="p">:</span> <span class="mi">420000005</span><span class="p">,</span>
                                <span class="s2">&quot;EBGPAllowMultipleAS&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                                <span class="s2">&quot;EBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
                                <span class="s2">&quot;IBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
                                <span class="s2">&quot;Redistribution&quot;</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s2">&quot;RouterId&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;UseMultiplePaths&quot;</span><span class="p">:</span> <span class="n">true</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;7f2c589d-3dea-4356-75be-91c7c2de18cb&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>State:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/state/BGPGlobals&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">185</span>  <span class="mi">100</span>   <span class="mi">185</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">28664</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">30833</span>
<span class="p">{</span>
        <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;AS&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                                <span class="s2">&quot;EBGPAllowMultipleAS&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                                <span class="s2">&quot;EBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
                                <span class="s2">&quot;IBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
                                <span class="s2">&quot;RouterId&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;TotalPaths&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;TotalPrefixes&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;UseMultiplePaths&quot;</span><span class="p">:</span> <span class="n">true</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">BGPGlobal has already been configured with AS number of 65535 and RouterId of 1.1.1.1</p>
</div>
</div>
<div class="section" id="id25">
<h4>1.3.6.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND</strong></p>
<p>Update BGP global:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=&lt;*</span><span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span><span class="p">,</span>
<span class="go">                                                                RouterId=&lt;*IP Addr*&gt;,</span>
<span class="go">                                                                UseMultiplePaths=&lt;*true/false*&gt;,</span>
<span class="go">                                                                EBGPMaxPaths=&lt;*Number of Paths*&gt;,</span>
<span class="go">                                                                IBGPMaxPaths=&lt;*Number of Paths*&gt;,)</span>
</pre></div>
</div>
<p>On BGP global creation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=&lt;*</span><span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span><span class="p">,</span>
<span class="go">                                                                RouterId=&lt;*IP Addr*&gt;,</span>
<span class="go">                                                                UseMultiplePaths=&lt;*true/false*&gt;,</span>
<span class="go">                                                                EBGPMaxPaths=&lt;*Number of Paths*&gt;,</span>
<span class="go">                                                                IBGPMaxPaths=&lt;*Number of Paths*&gt;,)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is a variable being enabled part of BGPGlobal object. See <a class="reference internal" href="#bgp-global-python"><span class="std std-ref">1.3.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</span></a> for more details.</p>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="10%" />
<col width="38%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><dl class="first docutils">
<dt>createBGPGlobal</dt>
<dd>OR</dd>
</dl>
<p class="last">updateBGPGlobal</p>
</td>
<td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UseMultiplePaths</td>
<td>boolean</td>
<td>Enable/disable ECMP for BGP</td>
<td>no</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>EBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from External BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
<tr class="row-even"><td>IBGPMaxPaths</td>
<td>integer</td>
<td>Max ECMP paths from Internal BGP neighbors</td>
<td>no</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="redistribution">
<h3>1.3.7&nbsp;&nbsp;&nbsp;Redistribution<a class="headerlink" href="#redistribution" title="Permalink to this headline">¶</a></h3>
<p>To redistribute routes to BGP neighbors, you must enable redistribution in BGP. You can redistribute connected, static and routes learned via other protocols to BGP neighbors. Redistribution is enabled by creating policies and setting the policy in the BGP Global object.</p>
<blockquote>
<div></div></blockquote>
<p>A policy has to be configured first to enable redistribution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <span class="xref std std-ref">routing-policies</span> to configure the policies.</p>
</div>
<p>Update BGP global</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:&lt;*AS Number*&gt;,&quot;RouterId&quot;:&quot;&lt;*IP Addr*&gt;&quot;,&quot;Redistribution&quot;:[{&quot;Sources&quot;:&quot;&lt;*CONNECTED/STATIC/OSPF*&gt;&quot;,&quot;Policy&quot;:&quot;&lt;*Policy Name*&gt;&quot;}]}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPGlobal&#39;</span>
</pre></div>
</div>
<p>On BGP global creation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:&lt;*AS Number*&gt;,&quot;RouterId&quot;:&quot;&lt;*IP Addr*&gt;&quot;,&quot;Redistribution&quot;:[{&quot;Sources&quot;:&quot;&lt;*CONNECTED/STATIC/OSPF*&gt;&quot;,&quot;Policy&quot;:&quot;&lt;*Policy Name*&gt;&quot;}]}&#39;</span> <span class="s1">&#39;http://&lt;*your-switchip*&gt;:8080/public/v1/config/BGPGlobal&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is a variable being enabled part of BGPGlobal object. See <a class="reference internal" href="#bgp-global-rest"><span class="std std-ref">1.3.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API</span></a> for more details.</p>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="41%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>Redistribution</td>
<td>[SourcePolicyList]</td>
<td>Redistribution policies</td>
<td>no</td>
<td>[]</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>Below is an example on how to enable BGP redistribution:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Configure policies and enable redistribution:</dt>
<dd><ol class="first last loweralpha simple">
<li>Configure the policy</li>
</ol>
</dd>
</dl>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>See <span class="xref std std-ref">routing-policies</span> to configure the policies.</p>
<ol class="loweralpha simple" start="2">
<li>Updating <em>Redistribution</em> to enable redistribution</li>
</ol>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;ASNum&quot;:65535,&quot;RouterId&quot;:&quot;1.1.1.1&quot;,&quot;Redistribution&quot;:[{&quot;Sources&quot;:&quot;CONNECTED,STATIC&quot;,&quot;Policy&quot;:&quot;Policy1&quot;},{&quot;Sources&quot;:&quot;OSPF&quot;,&quot;Policy&quot;:&quot;Policy2&quot;}]}&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPGlobal&#39;</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;7f2c589d-3dea-4356-75be-91c7c2de18cb&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<ol class="arabic" start="2">
<li><p class="first">Validate in configuration object that BGP Redistribution is enabled:</p>
<blockquote>
<div><p><strong>Configuration:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="s1">&#39;http://10.1.10.243:8080/public/v1/config/BGPGlobals&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">344</span>  <span class="mi">100</span>   <span class="mi">344</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">62228</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">68800</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;ASNum&quot;</span><span class="p">:</span> <span class="mi">65535</span><span class="p">,</span>
                <span class="s2">&quot;EBGPAllowMultipleAS&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;EBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;IBGPMaxPaths&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;RouterId&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;UseMultiplePaths&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;Redistribution&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;Sources&quot;</span><span class="p">:</span><span class="s2">&quot;CONNECTED,STATIC&quot;</span><span class="p">,</span><span class="s2">&quot;Policy&quot;</span><span class="p">:</span><span class="s2">&quot;Policy1&quot;</span><span class="p">},{</span><span class="s2">&quot;Sources&quot;</span><span class="p">:</span><span class="s2">&quot;OSPF&quot;</span><span class="p">,</span><span class="s2">&quot;Policy&quot;</span><span class="p">:</span><span class="s2">&quot;Policy2&quot;</span><span class="p">}]</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;7f2c589d-3dea-4356-75be-91c7c2de18cb&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">BGPGlobal has already been configured with AS number of 65535 and RouterId of 1.1.1.1</p>
</div>
<p><strong>COMMAND</strong></p>
<p>Update BGP global:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=&lt;*</span><span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span><span class="p">,</span>
<span class="go">                                RouterId=&lt;*IP Addr*&gt;,</span>
<span class="go">                                Redistribution=[{&quot;Sources&quot;:&quot;&lt;*CONNECTED/STATIC/OSPF*&gt;&quot;,&quot;Policy&quot;:&quot;&lt;*Policy Name*&gt;&quot;}],)</span>
</pre></div>
</div>
<p>On BGP global creation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;&lt;*Switch IP*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=&lt;*</span><span class="n">AS</span> <span class="n">Number</span><span class="o">*&gt;</span><span class="p">,</span>
<span class="go">                                RouterId=&lt;*IP Addr*&gt;,</span>
<span class="go">                                Redistribution=[{&quot;Sources&quot;:&quot;&lt;*CONNECTED/STATIC/OSPF*&gt;&quot;,&quot;Policy&quot;:&quot;&lt;*Policy Name*&gt;&quot;}],)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is a variable being enabled part of BGPGlobal object. See <a class="reference internal" href="#bgp-global-python"><span class="std std-ref">1.3.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK</span></a> for more details.</p>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="17%" />
<col width="17%" />
<col width="35%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><dl class="first docutils">
<dt>createBGPGlobal</dt>
<dd>OR</dd>
</dl>
<p class="last">updateBGPGlobal</p>
</td>
<td>ASNum</td>
<td>integer</td>
<td>Local AS for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>RouterId</td>
<td>string</td>
<td>Router id for BGP global config</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>Redistribution</td>
<td>[SourcePolicyList]</td>
<td>Redistribution policies</td>
<td>no</td>
<td>[]</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>Below is an example on how to enable BGP redistribution:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Configure policies and enable redistribution:</dt>
<dd><ol class="first last loweralpha simple">
<li>Configure the policy</li>
</ol>
</dd>
</dl>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>See <span class="xref std std-ref">routing-policies</span> to configure the policies.</p>
<blockquote class="last">
<div><ol class="loweralpha simple" start="2">
<li>Updating <em>Redistribution</em> to enable redistribution</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;10.1.10.245&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">updateBGPGlobal</span><span class="p">(</span><span class="n">ASNum</span><span class="o">=</span><span class="mi">65535</span><span class="p">,</span> <span class="n">RouterId</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span><span class="p">,</span> <span class="n">Redistribution</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;Sources&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;Policy&#39;</span><span class="p">:</span><span class="s1">&#39;Policy1&#39;</span><span class="p">}],)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="configuring-dhcp-relay">
<h2>1.4&nbsp;&nbsp;&nbsp;Configuring DHCP Relay<a class="headerlink" href="#configuring-dhcp-relay" title="Permalink to this headline">¶</a></h2>
<p>DHCP relay agent is a mechanism that acts as a proxy service for a DHCP server on a network. Since DHCP discover packets are broadcast, they can not reach a DHCP server,
that is off subnet. In order to get around this limitation DHCP relay, will ingest a DHCP DISCOVER broadcast frames and unicast forward them
to a specified DHCP servers and relay the reply to the host attempting IP address assignment.</p>
<div class="section" id="dhcp-relay-operation">
<h3>1.4.1&nbsp;&nbsp;&nbsp;DHCP Relay Operation<a class="headerlink" href="#dhcp-relay-operation" title="Permalink to this headline">¶</a></h3>
<p>Below are the FlexSwitch DHCP Relay agent states for this transaction:</p>
<blockquote>
<div><ul class="simple">
<li>Receive DISCOVER Packet</li>
<li>Relay client Packet to all servers (configured) updating Relay Agent Information in Dhcp Options</li>
<li>Receive OFFER Packet</li>
<li>Send Unicast OFFER to Client (if configured) else Broadcast OFFER Packet</li>
<li>Receive REQUEST Packet</li>
<li>Relay REQUEST Packet to Server</li>
<li>Receive ACK Packet</li>
<li>Relay ACK Packet to Client</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="enabling-dhcp-relay">
<h3>1.4.2&nbsp;&nbsp;&nbsp;Enabling DHCP relay<a class="headerlink" href="#enabling-dhcp-relay" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id26">
<h4>1.4.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<div class="section" id="enable-globally">
<h5>1.4.2.1.1&nbsp;&nbsp;&nbsp;Enable Globally<a class="headerlink" href="#enable-globally" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;DhcpRelay&quot;: &quot;dr&quot;, &quot;Enable&quot;: true }&#39;</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">10.1</span><span class="o">.</span><span class="mf">10.244</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">DhcpRelayGlobal</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><blockquote class="first">
<div>DhcpRelay</div></blockquote>
<blockquote class="last">
<div>Enable</div></blockquote>
</td>
<td>string</td>
<td>Key used to enable dhcp relay on a switch</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>bool</td>
<td>Dhcp Relay enabled/disabled globally</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="enable-on-interface">
<h5>1.4.2.1.2&nbsp;&nbsp;&nbsp;Enable On Interface<a class="headerlink" href="#enable-on-interface" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IfIndex&quot;: 33554442 , &quot;Enable&quot;: true , &quot;ServerIp&quot;: [&quot;90.0.1.2&quot;, &quot;80.0.1.2&quot;] }&#39;</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">10.1</span><span class="o">.</span><span class="mf">10.244</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">DhcpRelayIntf</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><blockquote class="first">
<div>IfIndex</div></blockquote>
<blockquote>
<div>Enable</div></blockquote>
<blockquote class="last">
<div>ServerIp</div></blockquote>
</td>
<td>integer</td>
<td>Key used to enable dhcp relay on a intf</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>bool</td>
<td>Dhcp Relay enabled/disabled on interface</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>list</td>
<td>list of server ip which relay agent will use</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
</div>
</div>
<div class="section" id="id27">
<h4>1.4.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id28">
<h5>1.4.2.2.1&nbsp;&nbsp;&nbsp;Enable Globally<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;&lt;*Switch Ip*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createDhcpRelayGlobal</span><span class="p">(</span><span class="n">DhcpRelay</span><span class="p">,</span> <span class="n">Enable</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">createDhcpRelayGlobal</td>
<td>DhcpRelay</td>
<td>string</td>
<td>Key used to enable dhcp relay on a switch</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Enable</td>
<td>bool</td>
<td>Dhcp Relay enabled/disabled globally</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id29">
<h5>1.4.2.2.2&nbsp;&nbsp;&nbsp;Enable On Interface<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;&lt;*Switch Ip*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createDhcpRelayIntf</span><span class="p">(</span><span class="n">IfIndex</span><span class="p">,</span> <span class="n">Enable</span><span class="p">,</span> <span class="n">ServerIp</span><span class="p">):</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Python Method</td>
<td rowspan="2"><blockquote class="first">
<div>Variables</div></blockquote>
<blockquote class="last">
<div>IfIndex</div></blockquote>
</td>
<td rowspan="2"><blockquote class="first">
<div>Type</div></blockquote>
<blockquote class="last">
<div>integer</div></blockquote>
</td>
<td rowspan="2"><blockquote class="first">
<div>Description</div></blockquote>
<blockquote class="last">
<div>Interface where dhcp relay needs config</div></blockquote>
</td>
<td rowspan="2"><blockquote class="first">
<div>Required</div></blockquote>
<blockquote class="last">
<div>Yes</div></blockquote>
</td>
<td rowspan="2"><blockquote class="first">
<div>Default</div></blockquote>
<blockquote class="last">
<div>None</div></blockquote>
</td>
</tr>
<tr class="row-even"><td rowspan="3">createDhcpRelayIntf</td>
</tr>
<tr class="row-odd"><td>Enable</td>
<td>bool</td>
<td>Dhcp Relay enabled/disabled on interface</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>ServerIp</td>
<td>list</td>
<td>list of server ip which relay agent will use</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;192.168.10.1&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createDhcpRelayGlobal</span><span class="p">(</span><span class="n">DhcpRelay</span><span class="o">=</span><span class="s2">&quot;dr&quot;</span><span class="p">,</span> <span class="n">Enable</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;192.168.10.1&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createDhcpRelayIntf</span><span class="p">(</span><span class="n">IfIndex</span><span class="o">=</span><span class="mi">355413</span><span class="p">,</span> <span class="n">Enable</span><span class="o">=</span><span class="n">true</span><span class="p">,</span> <span class="n">ServerIP</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;90.0.1.2&#39;</span><span class="p">,</span> <span class="s1">&#39;80.0.1.2&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="configuring-lldp">
<h2>1.5&nbsp;&nbsp;&nbsp;Configuring LLDP<a class="headerlink" href="#configuring-lldp" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Link Layer Discovery Protocol is a mechanism used by network devices for advertising their identity, capabilities and neighbors on a LAN. LLDP Information is send from each of the interfaces at fixed interval, in the form of Ethernet Frame. Each Frame contains below Information</dt>
<dd><ul class="first last simple">
<li>Mandatory TLV&#8217;s</li>
<li>Optional TLV&#8217;s</li>
</ul>
</dd>
<dt>Mandatory TLV&#8217;s include:</dt>
<dd><ul class="first last simple">
<li>Chassis ID</li>
<li>Port ID</li>
<li>TTL</li>
</ul>
</dd>
<dt>Optional TLV&#8217;s include:</dt>
<dd><ul class="first last simple">
<li>Management Address</li>
<li>System Description</li>
<li>System Hostname</li>
<li>System Version</li>
<li>Capabilites</li>
</ul>
</dd>
</dl>
<div class="section" id="id30">
<h3>1.5.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>LLDP by default according to IEEE documentation is enabled on all Interfaces which are in Admin UP state. However, lldp per port can be enabled/disabled using following command:</div></blockquote>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IfIndex&quot;:46, &quot;Enable&quot;: false }&#39;</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;*</span><span class="n">your</span> <span class="n">switch_ip</span><span class="o">*&gt;</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LLDPIntf</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IfIndex&quot;:46, &quot;Enable&quot;: true }&#39;</span>  <span class="n">http</span><span class="p">:</span><span class="o">//&lt;*</span><span class="n">your</span> <span class="n">switch_ip</span><span class="o">*&gt;/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LLDPIntf</span><span class="o">/&lt;*</span><span class="n">uuid</span><span class="o">*&gt;</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><blockquote class="first">
<div>IfIndex</div></blockquote>
<blockquote class="last">
<div>Enable</div></blockquote>
</td>
<td>integer</td>
<td>Interface where LLDP needs to be changed</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>bool</td>
<td>LLDP enabled/disabled</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id31">
<h3>1.5.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;&lt;*Switch Ip*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">updateLLDPIntf</span><span class="p">(</span><span class="n">IfIndex</span><span class="p">,</span> <span class="n">Enable</span><span class="p">):</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">createLLDPIntf</td>
<td>IfIndex</td>
<td>integer</td>
<td>Interface where LLDP needs to be changed</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Enable</td>
<td>bool</td>
<td>LLDP enabled/disabled</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;192.168.10.1&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createLLDPIntf</span><span class="p">(</span><span class="n">IfIndex</span><span class="o">=</span><span class="mi">355414</span><span class="p">,</span> <span class="n">Enable</span><span class="o">=</span><span class="n">false</span><span class="p">):</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-loopbacks">
<h2>1.6&nbsp;&nbsp;&nbsp;Configuring LoopBacks<a class="headerlink" href="#configuring-loopbacks" title="Permalink to this headline">¶</a></h2>
<p>LoopBack is configured using the LogicalIntf object.</p>
<div class="section" id="id32">
<h3>1.6.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;lo1&quot;, &quot;Type&quot;:&quot;Loopback&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LogicalIntf</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the logical interface</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Type</td>
<td>string</td>
<td>Type of the logical interface</td>
<td>Yes</td>
<td>Loopback</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;lo1&quot;, &quot;Type&quot;:&quot;Loopback&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LogicalIntf</span>
  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;lo2&quot;, &quot;Type&quot;:&quot;Loopback&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LogicalIntf</span>
  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;lo3&quot;, &quot;Type&quot;:&quot;Loopback&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">LogicalIntf</span>

  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="s1">&#39;http://localhost:8080/public/v1/config/LogicalIntfs&#39;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                               <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
  <span class="mi">100</span>   <span class="mi">359</span>  <span class="mi">100</span>   <span class="mi">359</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">99528</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">116</span><span class="n">k</span>
  <span class="p">{</span>
      <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;lo3&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Loopback&quot;</span>
              <span class="p">},</span>
              <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;4b0ce45d-455a-4767-6250-470339d3bb40&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;lo2&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Loopback&quot;</span>
              <span class="p">},</span>
              <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;c154f5c2-d982-48f0-585b-edc346e74f54&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;lo1&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Loopback&quot;</span>
              <span class="p">},</span>
              <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;777a93ee-f1f0-4117-48a3-678dfee2a194&quot;</span>
          <span class="p">}</span>
      <span class="p">]</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id33">
<h3>1.6.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="configuring-logging">
<h2>1.7&nbsp;&nbsp;&nbsp;Configuring Logging<a class="headerlink" href="#configuring-logging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="system">
<h3>1.7.1&nbsp;&nbsp;&nbsp;System<a class="headerlink" href="#system" title="Permalink to this headline">¶</a></h3>
<p>System level logging is enabled by default. It can be disabled or re-enabled. Daemon level logging is set to &#8220;info&#8221; by default.</p>
<div class="section" id="id34">
<h4>1.7.1.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Vrf&quot;:&quot;default&quot;, &quot;Logging&quot;: &quot;off&quot; }&#39;</span>  <span class="n">http</span><span class="p">:</span><span class="o">//&lt;*</span><span class="n">your</span> <span class="n">switch_ip</span><span class="o">*&gt;/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">SystemLogging</span>
</pre></div>
</div>
</div>
<div class="section" id="id35">
<h4>1.7.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">updateSystemLogging</td>
<td>Vrf</td>
<td>string</td>
<td>VRF name where logging will be changed</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Logging</td>
<td>string</td>
<td>Logging on/off</td>
<td>no</td>
<td>on</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong>
&gt;&gt;&gt; from flexswitchV2 import FlexSwitch
&gt;&gt;&gt; FlexSwitch (&#8220;192.168.10.1&#8221;, 8080).updateSystemLogging(Vrf=&#8221;default&#8221;, Logging=&#8221;off&#8221;):</p>
</div>
</div>
<div class="section" id="daemon">
<h3>1.7.2&nbsp;&nbsp;&nbsp;Daemon<a class="headerlink" href="#daemon" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id36">
<h4>1.7.2.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Module&quot;:&quot;bfdd&quot;, &quot;Level&quot;: &quot;debug&quot; }&#39;</span>  <span class="n">http</span><span class="p">:</span><span class="o">//&lt;*</span><span class="n">your</span> <span class="n">switch_ip</span><span class="o">*&gt;/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">ComponentLogging</span>
</pre></div>
</div>
</div>
<div class="section" id="id37">
<h4>1.7.2.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="22%" />
<col width="12%" />
<col width="23%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">updateComponentLogging</td>
<td>Module</td>
<td>string</td>
<td>Daemon name</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>Level</td>
<td>string</td>
<td>Logging level</td>
<td>no</td>
<td>info</td>
</tr>
</tbody>
</table>
<p>Logging level can be - crit/err/warn/alert/emerg/notice/info/debug/trace/off</p>
<p><strong>EXAMPLE:</strong>
&gt;&gt;&gt; from flexswitchV2 import FlexSwitch
&gt;&gt;&gt; FlexSwitch (&#8220;192.168.10.1&#8221;, 8080).updateComponentLogging(Module=&#8221;bfdd&#8221;, Level=&#8221;debug&#8221;):</p>
</div>
</div>
</div>
<div class="section" id="configuring-ospf">
<h2>1.8&nbsp;&nbsp;&nbsp;Configuring OSPF<a class="headerlink" href="#configuring-ospf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ospfareaentry">
<h3>1.8.1&nbsp;&nbsp;&nbsp;OspfAreaEntry<a class="headerlink" href="#ospfareaentry" title="Permalink to this headline">¶</a></h3>
<p>It will configure OSPF area specific params.
If ospfArea Entry is not added by default area 0.0.0.0 is created.</p>
<p><strong>AreaId</strong> = Unique area id . Used as key.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;AreaId&quot;: &quot;0.0.0.2&quot;, &quot;AuthType&quot;:0, &quot;ImportAsExtern&quot;:1, &quot;AreaSummary&quot;:1, &quot;AreaNssaTranslatorRole&quot;:2}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">OspfAreaEntry</span>
</pre></div>
</div>
</div>
<div class="section" id="ospfifentry">
<h3>1.8.2&nbsp;&nbsp;&nbsp;OspfIfEntry<a class="headerlink" href="#ospfifentry" title="Permalink to this headline">¶</a></h3>
<p>IfEntry configures OSPF interface.</p>
<p><strong>IfIpAddress</strong> = Ip address of the interface</p>
<p><strong>AddressLessIf</strong> = Ip index . Used to configure unnumbered P2P links.</p>
<p>The default IfRtrDeadInterval is 40 s whereas HelloInterval is 10s.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IfIpAddress&quot;: &quot;41.0.0.5&quot;, &quot;AddressLessIf&quot;:0, &quot;IfAreaId&quot;:&quot;0.0.0.0&quot;, &quot;IfType&quot;:&quot;Broadcast&quot;, &quot;IfAdminStat&quot;:1, &quot;IfRtrPriority&quot;:1, &quot;IfTransitDelay&quot;:1, &quot;IfRetransInterval&quot;:5, &quot;IfHelloInterval&quot;:10, &quot;IfRtrDeadInterval&quot;:40, &quot;IfPollInterval&quot;:120, &quot;IfAuthKey&quot;:&quot;0.0.0.0.0.0.0.0&quot;, &quot;IfAuthType&quot;:0}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">OspfIfEntry</span>
</pre></div>
</div>
</div>
<div class="section" id="ospfglobal">
<h3>1.8.3&nbsp;&nbsp;&nbsp;OspfGlobal<a class="headerlink" href="#ospfglobal" title="Permalink to this headline">¶</a></h3>
<p>This object will enable the global ospf feature. Unless ospf global is enabled  ,OspfAreaEntry wont take effect.</p>
<p><strong>RouterId</strong> = OSPF router id.</p>
<p><strong>ASBdrRtrStatus</strong> = set to true if router acts as ASBR.</p>
<p><strong>TOSSupport</strong> = OSPF TOS support. (Currently not supported.)</p>
<p><strong>RestartSupport</strong> = If the process restart is supported.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;RouterId&quot;: &quot;10.1.1.1&quot;, &quot;AdminStat&quot;:1, &quot;ASBdrRtrStatus&quot;:true, &quot;TOSSupport&quot;:true,  &quot;RestartSupport&quot;:1, &quot;RestartInterval&quot;:10}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">OspfGlobal</span>
</pre></div>
</div>
</div>
<div class="section" id="show-commands">
<h3>1.8.4&nbsp;&nbsp;&nbsp;Show commands<a class="headerlink" href="#show-commands" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Check Ospf Neighbors</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Accept: application/json&quot;</span> <span class="s2">&quot;http://localhost:8080/public/v1/state/OspfNbrEntrys?CurrentMarker=0&amp;NextMarker=0&amp;Count=10&quot;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>

   <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
   <span class="mi">100</span>   <span class="mi">367</span>  <span class="mi">100</span>   <span class="mi">367</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">58272</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">61166</span>
  <span class="p">{</span>
   <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
   <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;NbmaNbrPermanence&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrAddressLessIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrEvents&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
               <span class="s2">&quot;NbrHelloSuppressed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;NbrIpAddr&quot;</span><span class="p">:</span> <span class="s2">&quot;51.1.1.6&quot;</span><span class="p">,</span>
               <span class="s2">&quot;NbrLsRetransQLen&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrOptions&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrRestartHelperAge&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrRestartHelperExitReason&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrRestartHelperStatus&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
               <span class="s2">&quot;NbrRtrId&quot;</span><span class="p">:</span> <span class="s2">&quot;10.1.1.3&quot;</span><span class="p">,</span>
               <span class="s2">&quot;NbrState&quot;</span><span class="p">:</span> <span class="mi">7</span>
           <span class="p">},</span>
           <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
       <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>check LSA database</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Accept: application/json&quot;</span> <span class="s2">&quot;http://localhost:8080/public/v1/state/OspfLsdbEntrys&quot;</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-routing-policies">
<h2>1.9&nbsp;&nbsp;&nbsp;Configuring Routing Policies<a class="headerlink" href="#configuring-routing-policies" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuring-policy-condition-with-rest-api">
<h3>1.9.1&nbsp;&nbsp;&nbsp;Configuring Policy Condition with Rest API<a class="headerlink" href="#configuring-policy-condition-with-rest-api" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Match40&quot;, &quot;ConditionType&quot;:&quot;MatchDstIpPrefix&quot;, &quot;IpPrefix&quot;:&quot;40.1.3.0/24&quot;, &quot;MaskLengthRange&quot;:&quot;exact&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyCondition</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="14%" />
<col width="48%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the policy condition</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>ConditionType</td>
<td>string</td>
<td><dl class="first last docutils">
<dt>Condition type:</dt>
<dd><dl class="first docutils">
<dt>MatchProtocol</dt>
<dd>OR</dd>
</dl>
<p class="last">MatchDstIpPrefix</p>
</dd>
</dl>
</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>Protocol</td>
<td>String</td>
<td>If MatchProtocol is ConditionType, this
specifies the Protocol to be matched;
I.E. OSPF, BGP, STATIC</td>
<td>No</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>IpPrefix</td>
<td>String</td>
<td>Prefix to match on when the condition
type is MatchDstIpPrefix/MatchSrcIpPrefix</td>
<td>No</td>
<td>None</td>
</tr>
<tr class="row-even"><td>MaskLengthRange</td>
<td>String</td>
<td>Used along with IpPrefix and specifies
whether to match the exact prefix or a range</td>
<td>No</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">condition</span> <span class="n">to</span> <span class="n">match</span> <span class="n">on</span> <span class="n">a</span> <span class="n">network</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Match40&quot;, &quot;ConditionType&quot;:&quot;MatchDstIpPrefix&quot;, &quot;IpPrefix&quot;:&quot;40.1.3.0/24&quot;, &quot;MaskLengthRange&quot;:&quot;exact&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyCondition</span>
<span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;a8c98e74-eeb7-4580-6ff9-23b3b48d76f9&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

<span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyConditions</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                           <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">257</span>  <span class="mi">100</span>   <span class="mi">257</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">42138</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">51400</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
     <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                 <span class="s2">&quot;ConditionType&quot;</span><span class="p">:</span> <span class="s2">&quot;MatchDstIpPrefix&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;IpPrefix&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.3.0/24&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;MaskLengthRange&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Match40&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
             <span class="p">},</span>
             <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;a8c98e74-eeb7-4580-6ff9-23b3b48d76f9&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-policy-statement-with-rest-api">
<h3>1.9.2&nbsp;&nbsp;&nbsp;Configuring Policy Statement with Rest API<a class="headerlink" href="#configuring-policy-statement-with-rest-api" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Stmt1&quot;, &quot;MatchConditions&quot;:&quot;all&quot;, &quot;Conditions&quot;:[&quot;Match40&quot;], &quot;Action&quot;:&quot;permit&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyStmt</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="13%" />
<col width="49%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the policy Statement</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>MatchConditions</td>
<td>string</td>
<td>Specifies whether to match all or any
of the conditions</td>
<td>Yes</td>
<td>&#8220;all&#8221;</td>
</tr>
<tr class="row-even"><td>Conditions</td>
<td>[strings]</td>
<td>list of conditions used to evaluate this
statement</td>
<td>Yes</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Action</td>
<td>String</td>
<td>Action on a successful evaluation of statement</td>
<td>No</td>
<td>&#8220;deny&#8221;</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Stmt1&quot;, &quot;MatchConditions&quot;:&quot;all&quot;, &quot;Conditions&quot;:[&quot;Match40&quot;], &quot;Action&quot;:&quot;permit&quot;}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyStmt</span>
  <span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;e73825a0-b307-4498-76ad-5c8552c866e3&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

  <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyStmts</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
  <span class="mi">100</span>   <span class="mi">222</span>  <span class="mi">100</span>   <span class="mi">222</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">66486</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">74000</span>
  <span class="p">{</span>
      <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;permit&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;Match40&quot;</span>
                <span class="p">],</span>
                <span class="s2">&quot;MatchConditions&quot;</span><span class="p">:</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Stmt1&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;e73825a0-b307-4498-76ad-5c8552c866e3&quot;</span>
         <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-policy-definition-with-rest-api">
<h3>1.9.3&nbsp;&nbsp;&nbsp;Configuring Policy Definition with Rest API<a class="headerlink" href="#configuring-policy-definition-with-rest-api" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Policy1&quot;, &quot;Priority&quot;:1,&quot;MatchType&quot;:&quot;all&quot;, &quot;PolicyType&quot;:&quot;ALL&quot;, &quot;StatementList&quot;:[{&quot;Priority&quot;:1,&quot;Statement&quot;:&quot;Stmt1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyDefinition</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="29%" />
<col width="41%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>string</td>
<td>Name of the policy definition</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>Priority</td>
<td>int32</td>
<td>Priority of the policy</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>MatchType</td>
<td>string</td>
<td>Specifies if any or all of the statements
of the policy needs to be executed</td>
<td>No</td>
<td>&#8220;all&#8221;</td>
</tr>
<tr class="row-odd"><td>StatementList</td>
<td>[]PolicyDefinitionStmtPriority</td>
<td>List of {priority,statement}s specifies
statements in the policy and their priority</td>
<td>No</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;Name&quot;:&quot;Policy1&quot;, &quot;Priority&quot;:1,&quot;MatchType&quot;:&quot;all&quot;, &quot;PolicyType&quot;:&quot;ALL&quot;, &quot;StatementList&quot;:[{&quot;Priority&quot;:1,&quot;Statement&quot;:&quot;Stmt1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyDefinition</span>
  <span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;770dde8f-b357-4c38-4e25-8289e507614a&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

  <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">PolicyDefinitions</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
   <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
   <span class="mi">100</span>   <span class="mi">260</span>  <span class="mi">100</span>   <span class="mi">260</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">61743</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">65000</span>
   <span class="p">{</span>
       <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
       <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
       <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
       <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
       <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
           <span class="p">{</span>
               <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;MatchType&quot;</span><span class="p">:</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;Policy1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;PolicyType&quot;</span><span class="p">:</span> <span class="s2">&quot;ALL&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;Priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                   <span class="s2">&quot;StatementList&quot;</span><span class="p">:</span> <span class="p">[</span>
                   <span class="p">{</span>
                       <span class="s2">&quot;Priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                       <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="s2">&quot;Stmt1&quot;</span>
                   <span class="p">}</span>
               <span class="p">]</span>
           <span class="p">},</span>
           <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;770dde8f-b357-4c38-4e25-8289e507614a&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-routing">
<h2>1.10&nbsp;&nbsp;&nbsp;Configuring Routing<a class="headerlink" href="#configuring-routing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="static-routes">
<h3>1.10.1&nbsp;&nbsp;&nbsp;Static Routes<a class="headerlink" href="#static-routes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id38">
<h4>1.10.1.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<div class="section" id="configuring-single-hop-route">
<h5>1.10.1.1.1&nbsp;&nbsp;&nbsp;Configuring Single Hop Route<a class="headerlink" href="#configuring-single-hop-route" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;Protocol&quot;: &quot;STATIC&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.1.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="14%" />
<col width="48%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DestinationNw</td>
<td>string</td>
<td>IP address of the destination nw</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>Protocol</td>
<td>string</td>
<td>Route Protocol type</td>
<td>No</td>
<td>&#8220;STATIC&#8221;</td>
</tr>
<tr class="row-even"><td rowspan="4">NextHop</td>
<td>NextHopInfo</td>
<td>List of Next hop details:</td>
<td>Yes</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>Next Hop IP</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>string</td>
<td>Next Hop Interface</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>int32</td>
<td>Weight of the next hop  (0..31)</td>
<td>No</td>
<td>0</td>
</tr>
<tr class="row-even"><td>NullRoute</td>
<td>Boolean</td>
<td>Specify if this is Null Route</td>
<td>No</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>Cost</td>
<td>int32</td>
<td>Specify the cost of the Route</td>
<td>No</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>     <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;Protocol&quot;: &quot;STATIC&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.1.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>
 <span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;99181161-6438-40df-7926-a0dd78d5dd29&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

  <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Routes</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
 <span class="mi">100</span>   <span class="mi">315</span>  <span class="mi">100</span>   <span class="mi">315</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">76382</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">102</span><span class="n">k</span>
 <span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Cost&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;DestinationNw&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.10.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NetworkMask&quot;</span><span class="p">:</span> <span class="s2">&quot;255.255.255.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;NextHopIntRef&quot;</span><span class="p">:</span> <span class="s2">&quot;fpPort1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;NextHopIp&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.1.2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Weight&quot;</span><span class="p">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;NullRoute&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;Protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;STATIC&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;99181161-6438-40df-7926-a0dd78d5dd29&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-ecmp-routes">
<h5>1.10.1.1.2&nbsp;&nbsp;&nbsp;Configuring ECMP Routes<a class="headerlink" href="#configuring-ecmp-routes" title="Permalink to this headline">¶</a></h5>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">First</span> <span class="n">route</span><span class="p">:</span>

            <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;Protocol&quot;: &quot;STATIC&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.1.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>

    <span class="n">Subsequent</span> <span class="nb">next</span> <span class="n">hops</span> <span class="n">add</span><span class="p">:</span>

            <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;op&quot;:&quot;add&quot;, &quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.2.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort2&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>
</pre></div>
</div>
<p><strong>EXAMPLE:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>     <span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;Protocol&quot;: &quot;STATIC&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.1.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort1&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>
 <span class="p">{</span><span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span><span class="s2">&quot;99181161-6438-40df-7926-a0dd78d5dd29&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

  <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Routes</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
 <span class="mi">100</span>   <span class="mi">315</span>  <span class="mi">100</span>   <span class="mi">315</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">76382</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">102</span><span class="n">k</span>
 <span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Cost&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;DestinationNw&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.10.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NetworkMask&quot;</span><span class="p">:</span> <span class="s2">&quot;255.255.255.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;NextHopIntRef&quot;</span><span class="p">:</span> <span class="s2">&quot;fpPort1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;NextHopIp&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.1.2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Weight&quot;</span><span class="p">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;NullRoute&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;Protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;STATIC&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;99181161-6438-40df-7926-a0dd78d5dd29&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

    <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">PATCH</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;op&quot;:&quot;add&quot;, &quot;DestinationNw&quot;: &quot;40.1.10.0&quot;, &quot;NetworkMask&quot;: &quot;255.255.255.0&quot;, &quot;NextHop&quot;: [{&quot;NextHopIp&quot;: &quot;40.1.2.2&quot;, &quot;NextHopIntRef&quot;:&quot;fpPort2&quot;}]}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Route</span>

<span class="n">Display</span> <span class="n">after</span> <span class="n">the</span> <span class="n">second</span> <span class="nb">next</span> <span class="n">hop</span> <span class="n">add</span><span class="p">:</span>

    <span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">IPv4Routes</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">json</span><span class="o">.</span><span class="n">tool</span>  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>   <span class="mi">373</span>  <span class="mi">100</span>   <span class="mi">373</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">103</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">121</span><span class="n">k</span>
<span class="p">{</span>
    <span class="s2">&quot;CurrentMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;MoreExist&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;NextMarker&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;ObjCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;Objects&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
            <span class="s2">&quot;Object&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Cost&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;DestinationNw&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.10.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NetworkMask&quot;</span><span class="p">:</span> <span class="s2">&quot;255.255.255.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NextHop&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;NextHopIntRef&quot;</span><span class="p">:</span> <span class="s2">&quot;fpPort2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;NextHopIp&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.2.2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Weight&quot;</span><span class="p">:</span> <span class="mi">0</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;NextHopIntRef&quot;</span><span class="p">:</span> <span class="s2">&quot;fpPort1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;NextHopIp&quot;</span><span class="p">:</span> <span class="s2">&quot;40.1.1.2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Weight&quot;</span><span class="p">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;NullRoute&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;Protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;STATIC&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;ObjectId&quot;</span><span class="p">:</span> <span class="s2">&quot;99181161-6438-40df-7926-a0dd78d5dd29&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id39">
<h4>1.10.1.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="configuring-vlans">
<h2>1.11&nbsp;&nbsp;&nbsp;Configuring VLANS<a class="headerlink" href="#configuring-vlans" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id40">
<h3>1.11.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Accept: application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;VlanId&quot;:&lt;*Vlan-ID*&gt;,&quot;IntfList&quot;:&lt;*Tagged Interfaces*&gt;,&quot;UntagIntfList&quot;:&lt;*Untagged Interfaces*&gt;}&#39;</span> <span class="s1">&#39;http://your-switchip:8080/public/v1/config/Vlan&#39;</span>
</pre></div>
</div>
<p><strong>OPTIONS</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="14%" />
<col width="48%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VlanId</td>
<td>integer</td>
<td>Vlan ID to be configured</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>Intflist</td>
<td>string</td>
<td>comma separated list of tagged interfaces</td>
<td>No</td>
<td>None</td>
</tr>
<tr class="row-even"><td>UntagIntfList</td>
<td>string</td>
<td>comma separated list of unyagged interfaces</td>
<td>No</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
<p>In this example, 2 new vlans will be created and front-panel ports will be assigned to them.</p>
<p>These curl commands will create vlans 100 and 200 and assign ports 1-10 to vlan 100, ports 11-12 to vlan 200, and ports 13-15, and 17 to vlan 300:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;{&quot;VlanId&quot;:100,&quot;IntfList&quot;:&quot;&quot;,&quot;UntagIntfList&quot;:&quot;1-10&quot;}&#39; &#39;http://10.1.10.43:8080/public/v1/config/Vlan&#39;

{&quot;ObjectId&quot;:&quot;467f573f-a0d2-42dd-4fcb-181afbfb6624&quot;,&quot;Error&quot;:&quot;&quot;}

$ curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;{&quot;VlanId&quot;:200,&quot;IntfList&quot;:&quot;&quot;,&quot;UntagIntfList&quot;:&quot;11,12&quot;}&#39; &#39;http://10.1.10.43:8080/public/v1/config/Vlan&#39;

{&quot;ObjectId&quot;:&quot;e183a284-daf1-4397-77f3-c51f45ac5165&quot;,&quot;Error&quot;:&quot;&quot;}
</pre></div>
</div>
<p><strong>Validation:</strong></p>
<p>Vlan State:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -X GET --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; &#39;http://10.1.10.43:8080/public/v1/state/Vlans&#39; | python -m json.tool
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                                                 Dload  Upload   Total   Spent    Left  Speed
100   502  100   502    0     0  96668      0 --:--:-- --:--:-- --:--:--  122k
{
        &quot;CurrentMarker&quot;: 0,
        &quot;MoreExist&quot;: false,
        &quot;NextMarker&quot;: 4096,
        &quot;ObjCount&quot;: 3,
        &quot;Objects&quot;: [
                {
                        &quot;Object&quot;: {
                                &quot;ConfigObj&quot;: null,
                                &quot;IfIndex&quot;: 33554532,
                                &quot;OperState&quot;: &quot;UP&quot;,
                                &quot;VlanId&quot;: 100,
                                &quot;VlanName&quot;: &quot;vlan100&quot;
                        },
                        &quot;ObjectId&quot;: &quot;467f573f-a0d2-42dd-4fcb-181afbfb6624&quot;
                },
                {
                        &quot;Object&quot;: {
                                &quot;ConfigObj&quot;: null,
                                &quot;IfIndex&quot;: 33554632,
                                &quot;OperState&quot;: &quot;UP&quot;,
                                &quot;VlanId&quot;: 200,
                                &quot;VlanName&quot;: &quot;vlan200&quot;
                        },
                        &quot;ObjectId&quot;: &quot;e183a284-daf1-4397-77f3-c51f45ac5165&quot;
                },
        ]
}
</pre></div>
</div>
<p>Vlan Configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ curl -X GET --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; &#39;http://10.1.10.43:8080/public/v1/config/Vlans&#39; | python -m json.tool
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                                                 Dload  Upload   Total   Spent    Left  Speed
100   329  100   329    0     0  23901      0 --:--:-- --:--:-- --:--:-- 25307
{
        &quot;CurrentMarker&quot;: 0,
        &quot;MoreExist&quot;: false,
        &quot;NextMarker&quot;: 0,
        &quot;ObjCount&quot;: 2,
        &quot;Objects&quot;: [
                {
                        &quot;Object&quot;: {
                                &quot;ConfigObj&quot;: null,
                                &quot;IntfList&quot;: &quot;&quot;,
                                &quot;UntagIntfList&quot;: &quot;1-10&quot;,
                                &quot;VlanId&quot;: 100
                        },
                        &quot;ObjectId&quot;: &quot;467f573f-a0d2-42dd-4fcb-181afbfb6624&quot;
                },
                {
                        &quot;Object&quot;: {
                                &quot;ConfigObj&quot;: null,
                                &quot;IntfList&quot;: &quot;&quot;,
                                &quot;UntagIntfList&quot;: &quot;11,12&quot;,
                                &quot;VlanId&quot;: 200
                        },
                        &quot;ObjectId&quot;: &quot;e183a284-daf1-4397-77f3-c51f45ac5165&quot;
                }
        ]
}
</pre></div>
</div>
</div>
<div class="section" id="id41">
<h3>1.11.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="configuring-vrrp">
<h2>1.12&nbsp;&nbsp;&nbsp;Configuring VRRP<a class="headerlink" href="#configuring-vrrp" title="Permalink to this headline">¶</a></h2>
<p>VRRP (Virtual Router Redundancy Protocol) is an Internet protocol that provides a way to have one or more backup routers when using a statically configured router on a network segment. The most common arrangement is to specify a virtual IP/MAC address between a pair of switches devices to serve as the gateway for forwarding packets from a group of hosts, one switch is designated as a master device, while the other switch (or multiple switches), are designated as a backup device.
In case the master fails, the ownership of the virtual IP address is mapped to a backup switch&#8217;s IP address, which has now taken the role of  master.   This action occurs transparently to the end-hosts, since the IP/MAC combination for their discovered gateway (Virtual IP/MAC), does not change.</p>
<div class="section" id="id42">
<h3>1.12.1&nbsp;&nbsp;&nbsp;Configuring with Rest API<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;IfIndex&quot;:&lt;*Interface Unique Id*&gt;, &quot;VRID&quot;:&lt;*Virtual Router ID*&gt;, &quot;Priority&quot;:&lt;*Priority for the Vitrual Router*&gt;, &quot;VirtualIPv4Addr&quot;:&lt;*Virtual Router Ip Address*&gt;, &quot;PreemptMode&quot;:&lt;*true/false*&gt;, &quot;AdvertisementInterval&quot;:&lt;*Advertisement time between VRRP frames*&gt;, &quot;AcceptMode&quot;:&lt;*true/false*&gt; }&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;*</span><span class="n">your</span><span class="o">-</span><span class="n">switchip</span><span class="o">*&gt;</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">VrrpIntf</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="45%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><blockquote class="first">
<div>VRID</div></blockquote>
<blockquote>
<div>IfIndex</div></blockquote>
<blockquote>
<div>VirtualIPv4Addr</div></blockquote>
<blockquote>
<div>PreemptMode</div></blockquote>
<blockquote>
<div>Priority</div></blockquote>
<blockquote>
<div>AdvertisementInterval</div></blockquote>
<blockquote class="last">
<div>AcceptMode</div></blockquote>
</td>
<td>integer</td>
<td>Default Virtual Router ID</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>integer</td>
<td>Intf where VRID will be configured</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>string</td>
<td>Ip Address for Virtual Router</td>
<td>no</td>
<td>Port IP</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>Preempt a lower-priority Master</td>
<td>no</td>
<td>True</td>
</tr>
<tr class="row-even"><td>integer</td>
<td>Specifiying priority of Virtual Router</td>
<td>no</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>integer</td>
<td>Adverstise Time interval</td>
<td>no</td>
<td>1</td>
</tr>
<tr class="row-even"><td>boolean</td>
<td>Accept Packets address to ifIndex</td>
<td>no</td>
<td>True</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE</strong></p>
</div>
<div class="section" id="id43">
<h3>1.12.2&nbsp;&nbsp;&nbsp;Configuring with Python SDK<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<p><strong>COMMAND:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span> <span class="p">(</span><span class="s2">&quot;&lt;*Switch Ip*&gt;&quot;</span><span class="p">,</span> <span class="o">&lt;*</span><span class="n">TCP</span> <span class="n">Port</span><span class="o">*&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">createVrrpIntf</span><span class="p">(</span>
<span class="go">                                                   VRID,</span>
<span class="go">                                                   IfIndex,</span>
<span class="go">                                                   VirtualIPv4Addr,</span>
<span class="go">                                                   PreemptMode=True,</span>
<span class="go">                                                   Priority=100,</span>
<span class="go">                                                   AdvertisementInterval=1,</span>
<span class="go">                                                   AcceptMode=False)</span>
</pre></div>
</div>
<p><strong>OPTIONS:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="10%" />
<col width="37%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Python Method</th>
<th class="head">Variables</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7">createVrrpIntf</td>
<td>VRID</td>
<td>integer</td>
<td>Default Virtual Router ID</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>IfIndex</td>
<td>integer</td>
<td>Intf where VRID will be configured</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-even"><td>VirtualIPv4Addr</td>
<td>string</td>
<td>Ip Address for Virtual Router</td>
<td>no</td>
<td>Port IP</td>
</tr>
<tr class="row-odd"><td>PreemptMode</td>
<td>boolean</td>
<td>Preempt a lower-priority Master</td>
<td>no</td>
<td>True</td>
</tr>
<tr class="row-even"><td>Priority</td>
<td>integer</td>
<td>Specifiying priority of Virtual Router</td>
<td>no</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>AdvertisementInterval</td>
<td>integer</td>
<td>Adverstise Time interval</td>
<td>no</td>
<td>1</td>
</tr>
<tr class="row-even"><td>AcceptMode</td>
<td>boolean</td>
<td>Accept Packets address to ifIndex</td>
<td>no</td>
<td>True</td>
</tr>
</tbody>
</table>
<p><strong>EXAMPLE:</strong></p>
<p>Vrrp requires VRID to enable it per port. Once it is configured then Protocol FSM will start</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flexswitchV2</span> <span class="k">import</span> <span class="n">FlexSwitch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FlexSwitch</span><span class="p">(</span><span class="s2">&quot;192.168.0.2&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span><span class="o">.</span><span class="n">createVrrpIntf</span><span class="p">(</span><span class="n">ifIndex</span><span class="o">=</span><span class="mi">355413</span> <span class="p">,</span><span class="n">VRID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">VirtualIPv4Addr</span><span class="o">=</span><span class="s2">&quot;172.16.0.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="softwareflexswitch.html" class="btn btn-neutral float-right" title="FlexSwitch Package Installation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="python_config.html" class="btn btn-neutral" title="&lt;no title&gt;" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Snaproute.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>